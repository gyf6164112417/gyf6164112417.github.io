"use strict";(self["webpackChunkzhinenghuanzhuang"]=self["webpackChunkzhinenghuanzhuang"]||[]).push([[282],{748:function(e,a,t){t.d(a,{A:function(){return N}});var s=t(6768),i=t(5130),o=t(4232);const l={class:"system-logs"},n={class:"section-header"},r={class:"header-actions"},d={class:"filters"},c={class:"search-box"},u={class:"filter-options"},p={class:"filter-group"},k={class:"filter-group"},m={class:"filter-group"},v={key:0,class:"date-range"},g={class:"date-input"},L={class:"date-input"},f={class:"logs-container"},b={key:0,class:"loading-state"},h={key:1,class:"empty-state"},y={key:2,class:"logs-list"},w={class:"log-header"},C={class:"log-time"},_={class:"log-content"},D={class:"log-message"},x={class:"log-details"},E={class:"detail-item"},A={class:"detail-item"},F={class:"detail-item"},P={key:0,class:"log-extra"},U=["onClick"],M={key:0,class:"details-content"},R={key:3,class:"pagination"},B={class:"page-info"},S={class:"page-controls"},K=["disabled"],T=["onClick"],X=["disabled"],W={class:"page-size-control"};function V(e,a,t,V,I,$){const z=(0,s.g2)("BaseButton");return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("div",n,[a[13]||(a[13]=(0,s.Lk)("h2",null,"ç³»ç»Ÿæ—¥å¿—",-1)),(0,s.Lk)("div",r,[(0,s.bF)(z,{variant:"outline",size:"small",onClick:V.exportLogs},{default:(0,s.k6)((()=>a[11]||(a[11]=[(0,s.eW)(" å¯¼å‡ºæ—¥å¿— ")]))),_:1},8,["onClick"]),(0,s.bF)(z,{variant:"outline",size:"small",onClick:V.refreshLogs,loading:V.loading},{default:(0,s.k6)((()=>a[12]||(a[12]=[(0,s.eW)(" åˆ·æ–° ")]))),_:1},8,["onClick","loading"])])]),(0,s.Lk)("div",d,[(0,s.Lk)("div",c,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>V.searchQuery=e),placeholder:"æœç´¢æ—¥å¿—å†…å®¹...",class:"search-input",onKeyup:a[1]||(a[1]=(0,i.jR)(((...e)=>V.fetchLogs&&V.fetchLogs(...e)),["enter"]))},null,544),[[i.Jo,V.searchQuery]]),a[15]||(a[15]=(0,s.Lk)("span",{class:"search-icon"},"ğŸ”",-1)),(0,s.bF)(z,{size:"small",variant:"primary",onClick:V.fetchLogs,class:"search-btn"},{default:(0,s.k6)((()=>a[14]||(a[14]=[(0,s.eW)(" æœç´¢ ")]))),_:1},8,["onClick"])]),(0,s.Lk)("div",u,[(0,s.Lk)("div",p,[a[17]||(a[17]=(0,s.Lk)("label",null,"æ—¥å¿—ç±»å‹",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>V.filters.type=e),class:"filter-select"},a[16]||(a[16]=[(0,s.Fv)('<option value="" data-v-18852243>å…¨éƒ¨ç±»å‹</option><option value="error" data-v-18852243>é”™è¯¯</option><option value="warning" data-v-18852243>è­¦å‘Š</option><option value="info" data-v-18852243>ä¿¡æ¯</option><option value="system" data-v-18852243>ç³»ç»Ÿ</option><option value="security" data-v-18852243>å®‰å…¨</option>',6)]),512),[[i.u1,V.filters.type]])]),(0,s.Lk)("div",k,[a[19]||(a[19]=(0,s.Lk)("label",null,"æ“ä½œç”¨æˆ·",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>V.filters.user=e),class:"filter-select"},a[18]||(a[18]=[(0,s.Fv)('<option value="" data-v-18852243>å…¨éƒ¨ç”¨æˆ·</option><option value="system" data-v-18852243>ç³»ç»Ÿ</option><option value="admin" data-v-18852243>ç®¡ç†å‘˜</option><option value="user1" data-v-18852243>ç”¨æˆ·1</option><option value="designer1" data-v-18852243>è®¾è®¡å¸ˆ1</option>',5)]),512),[[i.u1,V.filters.user]])]),(0,s.Lk)("div",m,[a[21]||(a[21]=(0,s.Lk)("label",null,"æ—¶é—´èŒƒå›´",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>V.filters.timeRange=e),class:"filter-select"},a[20]||(a[20]=[(0,s.Fv)('<option value="today" data-v-18852243>ä»Šå¤©</option><option value="yesterday" data-v-18852243>æ˜¨å¤©</option><option value="week" data-v-18852243>æœ€è¿‘7å¤©</option><option value="month" data-v-18852243>æœ€è¿‘30å¤©</option><option value="custom" data-v-18852243>è‡ªå®šä¹‰</option>',5)]),512),[[i.u1,V.filters.timeRange]])]),(0,s.bF)(z,{variant:"outline",size:"small",onClick:V.resetFilters,class:"reset-btn"},{default:(0,s.k6)((()=>a[22]||(a[22]=[(0,s.eW)(" é‡ç½®ç­›é€‰ ")]))),_:1},8,["onClick"])]),"custom"===V.filters.timeRange?((0,s.uX)(),(0,s.CE)("div",v,[(0,s.Lk)("div",g,[a[23]||(a[23]=(0,s.Lk)("label",null,"å¼€å§‹æ—¥æœŸ",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":a[5]||(a[5]=e=>V.filters.startDate=e)},null,512),[[i.Jo,V.filters.startDate]])]),(0,s.Lk)("div",L,[a[24]||(a[24]=(0,s.Lk)("label",null,"ç»“æŸæ—¥æœŸ",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":a[6]||(a[6]=e=>V.filters.endDate=e)},null,512),[[i.Jo,V.filters.endDate]])])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",f,[V.loading?((0,s.uX)(),(0,s.CE)("div",b,a[25]||(a[25]=[(0,s.Lk)("div",{class:"loading-spinner"},null,-1),(0,s.Lk)("p",null,"åŠ è½½æ—¥å¿—ä¸­...",-1)]))):0===V.logs.length?((0,s.uX)(),(0,s.CE)("div",h,[a[27]||(a[27]=(0,s.Lk)("div",{class:"empty-icon"},"ğŸ“‹",-1)),a[28]||(a[28]=(0,s.Lk)("p",null,"æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æ—¥å¿—è®°å½•",-1)),(0,s.bF)(z,{onClick:V.resetFilters,variant:"outline",size:"small"},{default:(0,s.k6)((()=>a[26]||(a[26]=[(0,s.eW)(" æ¸…é™¤ç­›é€‰æ¡ä»¶ ")]))),_:1},8,["onClick"])])):((0,s.uX)(),(0,s.CE)("div",y,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(V.logs,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:(0,o.C4)(["log-item",[`log-${e.type}`]])},[(0,s.Lk)("div",w,[(0,s.Lk)("div",{class:(0,o.C4)(["log-type",e.type])},(0,o.v_)(V.getLogTypeText(e.type)),3),(0,s.Lk)("div",C,(0,o.v_)(V.formatDate(e.timestamp)),1)]),(0,s.Lk)("div",_,[(0,s.Lk)("div",D,(0,o.v_)(e.message),1),(0,s.Lk)("div",x,[(0,s.Lk)("span",E,[a[29]||(a[29]=(0,s.Lk)("strong",null,"æ“ä½œè€…:",-1)),(0,s.eW)(" "+(0,o.v_)(e.user),1)]),(0,s.Lk)("span",A,[a[30]||(a[30]=(0,s.Lk)("strong",null,"IPåœ°å€:",-1)),(0,s.eW)(" "+(0,o.v_)(e.ip),1)]),(0,s.Lk)("span",F,[a[31]||(a[31]=(0,s.Lk)("strong",null,"æ¨¡å—:",-1)),(0,s.eW)(" "+(0,o.v_)(e.module),1)])]),e.details?((0,s.uX)(),(0,s.CE)("div",P,[(0,s.Lk)("button",{class:"toggle-details",onClick:a=>e.showDetails=!e.showDetails},(0,o.v_)(e.showDetails?"æ”¶èµ·è¯¦æƒ…":"æŸ¥çœ‹è¯¦æƒ…"),9,U),e.showDetails?((0,s.uX)(),(0,s.CE)("pre",M,(0,o.v_)(V.formatDetails(e.details)),1)):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])],2)))),128))])),V.logs.length>0?((0,s.uX)(),(0,s.CE)("div",R,[(0,s.Lk)("div",B," å…± "+(0,o.v_)(V.totalItems)+" æ¡æ—¥å¿—ï¼Œå½“å‰æ˜¾ç¤º "+(0,o.v_)((V.currentPage-1)*V.pageSize+1)+"-"+(0,o.v_)(Math.min(V.currentPage*V.pageSize,V.totalItems))+" æ¡ ",1),(0,s.Lk)("div",S,[(0,s.Lk)("button",{class:"pagination-btn",disabled:1===V.currentPage,onClick:a[7]||(a[7]=e=>V.goToPage(V.currentPage-1))}," ä¸Šä¸€é¡µ ",8,K),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(V.displayedPages,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e,class:(0,o.C4)(["page-number",{active:V.currentPage===e,disabled:"..."===e}]),onClick:a=>V.goToPage(e)},(0,o.v_)(e),11,T)))),128)),(0,s.Lk)("button",{class:"pagination-btn",disabled:V.currentPage===V.totalPages,onClick:a[8]||(a[8]=e=>V.goToPage(V.currentPage+1))}," ä¸‹ä¸€é¡µ ",8,X)]),(0,s.Lk)("div",W,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[9]||(a[9]=e=>V.pageSize=e),onChange:a[10]||(a[10]=e=>V.changePage())},a[32]||(a[32]=[(0,s.Lk)("option",{value:"10"},"10æ¡/é¡µ",-1),(0,s.Lk)("option",{value:"20"},"20æ¡/é¡µ",-1),(0,s.Lk)("option",{value:"50"},"50æ¡/é¡µ",-1)]),544),[[i.u1,V.pageSize]])])])):(0,s.Q3)("",!0)])])}t(4114);var I=t(144),$=t(1218),z={name:"SystemLogs",components:{BaseButton:$.A},setup(){const e=(0,I.KR)([]),a=(0,I.KR)(!1),t=(0,I.KR)(""),i=(0,I.KR)(0),o=(0,I.KR)(1),l=(0,I.KR)(20),n=(0,I.KR)(1),r=(0,I.Kh)({type:"",user:"",timeRange:"month",startDate:"",endDate:""}),d=()=>{const e=new Date,a=new Date(e);a.setDate(e.getDate()-30),r.startDate=c(a),r.endDate=c(e)},c=e=>{const a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${a}-${t}-${s}`};(0,s.sV)((()=>{d(),m()})),(0,s.wB)([r.type,r.user,r.timeRange,r.startDate,r.endDate],(()=>{"custom"!==r.timeRange&&u(),o.value=1}));const u=()=>{const e=new Date;let a=new Date(e);switch(r.timeRange){case"today":a.setHours(0,0,0,0);break;case"yesterday":a.setDate(e.getDate()-1),a.setHours(0,0,0,0);break;case"week":a.setDate(e.getDate()-7);break;case"month":a.setDate(e.getDate()-30);break;default:break}r.startDate=c(a),r.endDate=c(e)},p=(0,s.EW)((()=>{const e=n.value,a=o.value;return e<=7?Array.from({length:e},((e,a)=>a+1)):a<=3?[1,2,3,4,"...",e]:a>=e-2?[1,"...",e-3,e-2,e-1,e]:[1,"...",a-1,a,a+1,"...",e]})),k=e=>{"..."===e||e<1||e>n.value||(o.value=e,m())},m=async()=>{a.value=!0;try{await new Promise((e=>setTimeout(e,1e3))),w()}catch(e){console.error("è·å–æ—¥å¿—æ•°æ®å¤±è´¥",e)}finally{a.value=!1}},v=()=>{alert("æ—¥å¿—å¯¼å‡ºåŠŸèƒ½å°†åœ¨å®é™…åœºæ™¯ä¸­å®ç°ï¼Œå¯å¯¼å‡ºä¸ºCSVã€Excelç­‰æ ¼å¼")},g=()=>{r.type="",r.user="",r.timeRange="month",u(),o.value=1,m()},L=()=>{m()},f=()=>{o.value=1,m()},b=e=>{const a={error:"é”™è¯¯",warning:"è­¦å‘Š",info:"ä¿¡æ¯",system:"ç³»ç»Ÿ",security:"å®‰å…¨"};return a[e]||e},h=e=>{const a=new Date(e);return a.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},y=e=>"object"===typeof e?JSON.stringify(e,null,2):e,w=()=>{const a=["error","warning","info","system","security"],s=["ç³»ç»Ÿ","ç®¡ç†å‘˜","ç”¨æˆ·1","è®¾è®¡å¸ˆ1"],d=["ç”¨æˆ·ç®¡ç†","ç³»ç»Ÿè®¾ç½®","AIè®¾ç½®","æ¨¡å‹è®­ç»ƒ","è®¤è¯","æƒé™"],c=["ç”¨æˆ·ç™»å½•æˆåŠŸ","æƒé™ä¸è¶³ï¼Œæ“ä½œè¢«æ‹’ç»","ç³»ç»Ÿè®¾ç½®å·²æ›´æ–°","æ¨¡å‹è®­ç»ƒä»»åŠ¡å·²å®Œæˆ","ç”¨æˆ·å¯†ç ä¿®æ”¹æˆåŠŸ","ç³»ç»Ÿå¤‡ä»½å·²å®Œæˆ","è¿ç»­å¤šæ¬¡ç™»å½•å¤±è´¥ï¼Œè´¦å·å·²é”å®š","APIå¯†é’¥å·²æ›´æ–°","æ–°ç”¨æˆ·æ³¨å†Œ","æ–‡ä»¶ä¸Šä¼ å¤±è´¥"],u=135,p=(o.value-1)*l.value;i.value=u,n.value=Math.ceil(u/l.value);const k=[];for(let e=0;e<Math.min(l.value,u-p);e++){const t=a[Math.floor(Math.random()*a.length)];if(r.type&&r.type!==t)continue;const i=s[Math.floor(Math.random()*s.length)];if(r.user&&r.user!==i)continue;const o=new Date,l=Math.floor(60*Math.random()),n=new Date(o);n.setDate(o.getDate()-l);const u=r.startDate?new Date(r.startDate):null,p=r.endDate?new Date(r.endDate):null;if(!(u&&n<u)){if(p){const e=new Date(p);if(e.setHours(23,59,59,999),n>e)continue}k.push({id:`log-${Date.now()}-${e}`,type:t,timestamp:n.getTime(),message:c[Math.floor(Math.random()*c.length)],user:i,ip:`192.168.${Math.floor(255*Math.random())}.${Math.floor(255*Math.random())}`,module:d[Math.floor(Math.random()*d.length)],details:"error"===t||Math.random()>.7?{requestData:{param1:"value1",param2:"value2"},additionalInfo:"Some additional information about this log entry"}:null,showDetails:!1})}}if(t.value){const a=t.value.toLowerCase();e.value=k.filter((e=>e.message.toLowerCase().includes(a)||e.user.toLowerCase().includes(a)||e.module.toLowerCase().includes(a)))}else e.value=k;0===e.value.length&&0===k.length&&(i.value=0,n.value=1)};return{logs:e,loading:a,searchQuery:t,filters:r,totalItems:i,currentPage:o,pageSize:l,totalPages:n,displayedPages:p,goToPage:k,fetchLogs:m,exportLogs:v,resetFilters:g,refreshLogs:L,changePage:f,getLogTypeText:b,formatDate:h,formatDetails:y}}},O=t(1241);const Q=(0,O.A)(z,[["render",V],["__scopeId","data-v-18852243"]]);var N=Q},1031:function(e,a,t){t.d(a,{A:function(){return oe}});var s=t(6768),i=t(5130),o=t(4232);const l={class:"user-management"},n={class:"section-header"},r={class:"filters"},d={class:"search-box"},c={class:"filter-options"},u={class:"user-table-container"},p={class:"user-table"},k={key:0,class:"sort-icon"},m={key:0,class:"sort-icon"},v={key:0,class:"sort-icon"},g={key:0,class:"sort-icon"},L={key:0,class:"sort-icon"},f={key:0,class:"loading-row"},b={key:1,class:"empty-row"},h={class:"user-avatar"},y=["src"],w={class:"action-buttons"},C=["onClick"],_=["title","onClick"],D=["onClick"],x={class:"pagination"},E=["disabled"],A={class:"page-numbers"},F=["onClick"],P=["disabled"],U={class:"page-size"},M={class:"delete-confirm"},R={class:"confirm-actions"};function B(e,a,t,B,S,K){const T=(0,s.g2)("BaseButton"),X=(0,s.g2)("UserForm"),W=(0,s.g2)("BaseModal");return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("div",n,[a[20]||(a[20]=(0,s.Lk)("h2",null,"ç”¨æˆ·ç®¡ç†",-1)),(0,s.bF)(T,{onClick:a[0]||(a[0]=e=>B.showAddUserModal=!0),size:"small"},{icon:(0,s.k6)((()=>a[18]||(a[18]=[(0,s.eW)("â•")]))),default:(0,s.k6)((()=>[a[19]||(a[19]=(0,s.eW)(" æ·»åŠ ç”¨æˆ· "))])),_:1})]),(0,s.Lk)("div",r,[(0,s.Lk)("div",d,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>B.searchQuery=e),placeholder:"æœç´¢ç”¨æˆ·åæˆ–é‚®ç®±...",class:"search-input"},null,512),[[i.Jo,B.searchQuery]]),a[21]||(a[21]=(0,s.Lk)("span",{class:"search-icon"},"ğŸ”",-1))]),(0,s.Lk)("div",c,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>B.roleFilter=e),class:"filter-select"},a[22]||(a[22]=[(0,s.Lk)("option",{value:""},"æ‰€æœ‰è§’è‰²",-1),(0,s.Lk)("option",{value:"admin"},"ç®¡ç†å‘˜",-1),(0,s.Lk)("option",{value:"designer"},"è®¾è®¡å¸ˆ",-1),(0,s.Lk)("option",{value:"user"},"æ™®é€šç”¨æˆ·",-1)]),512),[[i.u1,B.roleFilter]]),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>B.statusFilter=e),class:"filter-select"},a[23]||(a[23]=[(0,s.Lk)("option",{value:""},"æ‰€æœ‰çŠ¶æ€",-1),(0,s.Lk)("option",{value:"active"},"æ¿€æ´»",-1),(0,s.Lk)("option",{value:"inactive"},"æœªæ¿€æ´»",-1),(0,s.Lk)("option",{value:"locked"},"å·²é”å®š",-1)]),512),[[i.u1,B.statusFilter]])])]),(0,s.Lk)("div",u,[(0,s.Lk)("table",p,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[a[29]||(a[29]=(0,s.Lk)("th",null,"ç”¨æˆ·å¤´åƒ",-1)),(0,s.Lk)("th",{onClick:a[4]||(a[4]=e=>B.sortBy("username"))},[a[24]||(a[24]=(0,s.eW)(" ç”¨æˆ·å ")),"username"===B.sortKey?((0,s.uX)(),(0,s.CE)("span",k,(0,o.v_)("asc"===B.sortOrder?"â–²":"â–¼"),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("th",{onClick:a[5]||(a[5]=e=>B.sortBy("email"))},[a[25]||(a[25]=(0,s.eW)(" é‚®ç®± ")),"email"===B.sortKey?((0,s.uX)(),(0,s.CE)("span",m,(0,o.v_)("asc"===B.sortOrder?"â–²":"â–¼"),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("th",{onClick:a[6]||(a[6]=e=>B.sortBy("role"))},[a[26]||(a[26]=(0,s.eW)(" è§’è‰² ")),"role"===B.sortKey?((0,s.uX)(),(0,s.CE)("span",v,(0,o.v_)("asc"===B.sortOrder?"â–²":"â–¼"),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("th",{onClick:a[7]||(a[7]=e=>B.sortBy("lastLogin"))},[a[27]||(a[27]=(0,s.eW)(" æœ€åç™»å½• ")),"lastLogin"===B.sortKey?((0,s.uX)(),(0,s.CE)("span",g,(0,o.v_)("asc"===B.sortOrder?"â–²":"â–¼"),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("th",{onClick:a[8]||(a[8]=e=>B.sortBy("status"))},[a[28]||(a[28]=(0,s.eW)(" çŠ¶æ€ ")),"status"===B.sortKey?((0,s.uX)(),(0,s.CE)("span",L,(0,o.v_)("asc"===B.sortOrder?"â–²":"â–¼"),1)):(0,s.Q3)("",!0)]),a[30]||(a[30]=(0,s.Lk)("th",null,"æ“ä½œ",-1))])]),(0,s.Lk)("tbody",null,[B.loading?((0,s.uX)(),(0,s.CE)("tr",f,a[31]||(a[31]=[(0,s.Lk)("td",{colspan:"7",class:"text-center"},[(0,s.Lk)("div",{class:"loading-spinner"}),(0,s.Lk)("p",null,"åŠ è½½ä¸­...")],-1)]))):0===B.filteredUsers.length?((0,s.uX)(),(0,s.CE)("tr",b,a[32]||(a[32]=[(0,s.Lk)("td",{colspan:"7",class:"text-center"}," æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ç”¨æˆ· ",-1)]))):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(B.paginatedUsers,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,[(0,s.Lk)("div",h,[(0,s.Lk)("img",{src:e.avatar,alt:"ç”¨æˆ·å¤´åƒ"},null,8,y)])]),(0,s.Lk)("td",null,(0,o.v_)(e.username),1),(0,s.Lk)("td",null,(0,o.v_)(e.email),1),(0,s.Lk)("td",null,[(0,s.Lk)("span",{class:(0,o.C4)("role-badge "+e.role)},(0,o.v_)(B.getRoleName(e.role)),3)]),(0,s.Lk)("td",null,(0,o.v_)(B.formatDate(e.lastLogin)),1),(0,s.Lk)("td",null,[(0,s.Lk)("span",{class:(0,o.C4)("status-badge "+e.status)},(0,o.v_)(B.getStatusText(e.status)),3)]),(0,s.Lk)("td",null,[(0,s.Lk)("div",w,[(0,s.Lk)("button",{class:"action-btn edit",title:"ç¼–è¾‘ç”¨æˆ·",onClick:a=>B.editUser(e)}," âœï¸ ",8,C),(0,s.Lk)("button",{class:(0,o.C4)(["action-btn","locked"===e.status?"unlock":"lock"]),title:"locked"===e.status?"è§£é”ç”¨æˆ·":"é”å®šç”¨æˆ·",onClick:a=>B.toggleUserLock(e)},(0,o.v_)("locked"===e.status?"ğŸ”“":"ğŸ”’"),11,_),(0,s.Lk)("button",{class:"action-btn delete",title:"åˆ é™¤ç”¨æˆ·",onClick:a=>B.confirmDelete(e)}," ğŸ—‘ï¸ ",8,D)])])])))),128))])])]),(0,s.Lk)("div",x,[(0,s.Lk)("button",{class:"pagination-btn",disabled:1===B.currentPage,onClick:a[9]||(a[9]=e=>B.currentPage--)}," ä¸Šä¸€é¡µ ",8,E),(0,s.Lk)("div",A,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(B.displayedPages,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e,class:(0,o.C4)(["page-number",{active:B.currentPage===e}]),onClick:a=>B.currentPage=e},(0,o.v_)(e),11,F)))),128))]),(0,s.Lk)("button",{class:"pagination-btn",disabled:B.currentPage===B.totalPages,onClick:a[10]||(a[10]=e=>B.currentPage++)}," ä¸‹ä¸€é¡µ ",8,P),(0,s.Lk)("div",U,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[11]||(a[11]=e=>B.pageSize=e)},a[33]||(a[33]=[(0,s.Lk)("option",{value:"10"},"10æ¡/é¡µ",-1),(0,s.Lk)("option",{value:"20"},"20æ¡/é¡µ",-1),(0,s.Lk)("option",{value:"50"},"50æ¡/é¡µ",-1)]),512),[[i.u1,B.pageSize]])])]),B.showAddUserModal?((0,s.uX)(),(0,s.Wv)(W,{key:0,title:"æ·»åŠ æ–°ç”¨æˆ·",onClose:a[13]||(a[13]=e=>B.showAddUserModal=!1)},{default:(0,s.k6)((()=>[(0,s.bF)(X,{user:B.newUser,onSubmit:B.addUser,onCancel:a[12]||(a[12]=e=>B.showAddUserModal=!1)},null,8,["user","onSubmit"])])),_:1})):(0,s.Q3)("",!0),B.showEditUserModal?((0,s.uX)(),(0,s.Wv)(W,{key:1,title:"ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯",onClose:a[15]||(a[15]=e=>B.showEditUserModal=!1)},{default:(0,s.k6)((()=>[(0,s.bF)(X,{user:B.selectedUser,"is-edit":!0,onSubmit:B.updateUser,onCancel:a[14]||(a[14]=e=>B.showEditUserModal=!1)},null,8,["user","onSubmit"])])),_:1})):(0,s.Q3)("",!0),B.showDeleteModal?((0,s.uX)(),(0,s.Wv)(W,{key:2,title:"ç¡®è®¤åˆ é™¤",onClose:a[17]||(a[17]=e=>B.showDeleteModal=!1)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",M,[(0,s.Lk)("p",null,[a[34]||(a[34]=(0,s.eW)("æ‚¨ç¡®å®šè¦åˆ é™¤ç”¨æˆ· ")),(0,s.Lk)("strong",null,(0,o.v_)(B.selectedUser.username),1),a[35]||(a[35]=(0,s.eW)(" å—ï¼Ÿ"))]),a[38]||(a[38]=(0,s.Lk)("p",{class:"warning"},"æ­¤æ“ä½œä¸å¯é€†ï¼Œåˆ é™¤åæ•°æ®æ— æ³•æ¢å¤ï¼",-1)),(0,s.Lk)("div",R,[(0,s.bF)(T,{onClick:a[16]||(a[16]=e=>B.showDeleteModal=!1),variant:"outline"},{default:(0,s.k6)((()=>a[36]||(a[36]=[(0,s.eW)(" å–æ¶ˆ ")]))),_:1}),(0,s.bF)(T,{onClick:B.deleteUser,variant:"danger"},{default:(0,s.k6)((()=>a[37]||(a[37]=[(0,s.eW)(" ç¡®è®¤åˆ é™¤ ")]))),_:1},8,["onClick"])])])])),_:1})):(0,s.Q3)("",!0)])}t(4114),t(8111),t(2489),t(1701);var S=t(144),K=t(1218),T=t(4121);const X={class:"form-group"},W={key:0,class:"error-message"},V={class:"form-group"},I={key:0,class:"error-message"},$={key:0,class:"form-group"},z={class:"password-input"},O=["type"],Q={key:0,class:"error-message"},N={key:1,class:"form-group"},J={class:"password-input"},G=["type"],H={class:"form-group"},q={class:"form-group"},j={class:"form-actions"};function Y(e,a,t,l,n,r){const d=(0,s.g2)("BaseButton");return(0,s.uX)(),(0,s.CE)("form",{class:"user-form",onSubmit:a[9]||(a[9]=(0,i.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"]))},[(0,s.Lk)("div",X,[a[10]||(a[10]=(0,s.Lk)("label",{for:"username"},[(0,s.eW)("ç”¨æˆ·å"),(0,s.Lk)("span",{class:"required"},"*")],-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":a[0]||(a[0]=e=>l.formData.username=e),class:(0,o.C4)({error:l.errors.username}),required:""},null,2),[[i.Jo,l.formData.username]]),l.errors.username?((0,s.uX)(),(0,s.CE)("p",W,(0,o.v_)(l.errors.username),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",V,[a[11]||(a[11]=(0,s.Lk)("label",{for:"email"},[(0,s.eW)("é‚®ç®±"),(0,s.Lk)("span",{class:"required"},"*")],-1)),(0,s.bo)((0,s.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":a[1]||(a[1]=e=>l.formData.email=e),class:(0,o.C4)({error:l.errors.email}),required:""},null,2),[[i.Jo,l.formData.email]]),l.errors.email?((0,s.uX)(),(0,s.CE)("p",I,(0,o.v_)(l.errors.email),1)):(0,s.Q3)("",!0)]),t.isEdit?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",$,[a[12]||(a[12]=(0,s.Lk)("label",{for:"password"},[(0,s.eW)("å¯†ç "),(0,s.Lk)("span",{class:"required"},"*")],-1)),(0,s.Lk)("div",z,[(0,s.bo)((0,s.Lk)("input",{type:l.showPassword?"text":"password",id:"password","onUpdate:modelValue":a[2]||(a[2]=e=>l.formData.password=e),class:(0,o.C4)({error:l.errors.password}),required:""},null,10,O),[[i.hp,l.formData.password]]),(0,s.Lk)("button",{type:"button",class:"toggle-password",onClick:a[3]||(a[3]=e=>l.showPassword=!l.showPassword)},(0,o.v_)(l.showPassword?"ğŸ‘ï¸":"ğŸ‘ï¸â€ğŸ—¨ï¸"),1)]),l.errors.password?((0,s.uX)(),(0,s.CE)("p",Q,(0,o.v_)(l.errors.password),1)):(0,s.Q3)("",!0)])),t.isEdit?((0,s.uX)(),(0,s.CE)("div",N,[a[13]||(a[13]=(0,s.Lk)("label",{for:"newPassword"},"æ–°å¯†ç  (ç•™ç©ºè¡¨ç¤ºä¸ä¿®æ”¹)",-1)),(0,s.Lk)("div",J,[(0,s.bo)((0,s.Lk)("input",{type:l.showPassword?"text":"password",id:"newPassword","onUpdate:modelValue":a[4]||(a[4]=e=>l.formData.newPassword=e)},null,8,G),[[i.hp,l.formData.newPassword]]),(0,s.Lk)("button",{type:"button",class:"toggle-password",onClick:a[5]||(a[5]=e=>l.showPassword=!l.showPassword)},(0,o.v_)(l.showPassword?"ğŸ‘ï¸":"ğŸ‘ï¸â€ğŸ—¨ï¸"),1)])])):(0,s.Q3)("",!0),(0,s.Lk)("div",H,[a[15]||(a[15]=(0,s.Lk)("label",{for:"role"},[(0,s.eW)("è§’è‰²"),(0,s.Lk)("span",{class:"required"},"*")],-1)),(0,s.bo)((0,s.Lk)("select",{id:"role","onUpdate:modelValue":a[6]||(a[6]=e=>l.formData.role=e),required:""},a[14]||(a[14]=[(0,s.Lk)("option",{value:"admin"},"ç®¡ç†å‘˜",-1),(0,s.Lk)("option",{value:"designer"},"è®¾è®¡å¸ˆ",-1),(0,s.Lk)("option",{value:"user"},"æ™®é€šç”¨æˆ·",-1)]),512),[[i.u1,l.formData.role]])]),(0,s.Lk)("div",q,[a[17]||(a[17]=(0,s.Lk)("label",{for:"status"},[(0,s.eW)("çŠ¶æ€"),(0,s.Lk)("span",{class:"required"},"*")],-1)),(0,s.bo)((0,s.Lk)("select",{id:"status","onUpdate:modelValue":a[7]||(a[7]=e=>l.formData.status=e),required:""},a[16]||(a[16]=[(0,s.Lk)("option",{value:"active"},"å·²æ¿€æ´»",-1),(0,s.Lk)("option",{value:"inactive"},"æœªæ¿€æ´»",-1),(0,s.Lk)("option",{value:"locked"},"å·²é”å®š",-1)]),512),[[i.u1,l.formData.status]])]),(0,s.Lk)("div",j,[(0,s.bF)(d,{type:"button",variant:"outline",onClick:a[8]||(a[8]=a=>e.$emit("cancel"))},{default:(0,s.k6)((()=>a[18]||(a[18]=[(0,s.eW)(" å–æ¶ˆ ")]))),_:1}),(0,s.bF)(d,{type:"submit",variant:"primary",loading:l.submitting},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(t.isEdit?"ä¿å­˜ä¿®æ”¹":"æ·»åŠ ç”¨æˆ·"),1)])),_:1},8,["loading"])])],32)}t(7588);var Z={name:"UserForm",components:{BaseButton:K.A},props:{user:{type:Object,required:!0},isEdit:{type:Boolean,default:!1}},setup(e,{emit:a}){const t=(0,S.Kh)({id:e.user.id||null,username:e.user.username||"",email:e.user.email||"",password:e.user.password||"",newPassword:"",role:e.user.role||"user",status:e.user.status||"active"}),i=(0,S.Kh)({username:"",email:"",password:""}),o=(0,S.KR)(!1),l=(0,S.KR)(!1);(0,s.wB)((()=>e.user),(e=>{Object.keys(e).forEach((a=>{a in t&&"password"!==a&&(t[a]=e[a])}))}),{deep:!0});const n=()=>{let a=!0;Object.keys(i).forEach((e=>{i[e]=""})),t.username.trim()?t.username.length<2&&(i.username="ç”¨æˆ·åè‡³å°‘éœ€è¦2ä¸ªå­—ç¬¦",a=!1):(i.username="ç”¨æˆ·åä¸èƒ½ä¸ºç©º",a=!1);const s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.email.trim()?s.test(t.email)||(i.email="è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€",a=!1):(i.email="é‚®ç®±ä¸èƒ½ä¸ºç©º",a=!1),e.isEdit||(t.password?t.password.length<6&&(i.password="å¯†ç è‡³å°‘éœ€è¦6ä¸ªå­—ç¬¦",a=!1):(i.password="å¯†ç ä¸èƒ½ä¸ºç©º",a=!1)),a},r=async()=>{if(n()){l.value=!0;try{await new Promise((e=>setTimeout(e,600)));const s={...t};e.isEdit&&(s.newPassword&&(s.password=s.newPassword),delete s.newPassword),a("submit",s)}catch(s){console.error("æäº¤è¡¨å•å¤±è´¥",s)}finally{l.value=!1}}};return{formData:t,errors:i,showPassword:o,submitting:l,handleSubmit:r}}},ee=t(1241);const ae=(0,ee.A)(Z,[["render",Y],["__scopeId","data-v-e4f83630"]]);var te=ae,se={name:"UserManagement",components:{BaseButton:K.A,BaseModal:T.A,UserForm:te},setup(){const e=(0,S.KR)([]),a=(0,S.KR)(!0),t=(0,S.KR)(""),i=(0,S.KR)(""),o=(0,S.KR)(""),l=(0,S.KR)("username"),n=(0,S.KR)("asc"),r=(0,S.KR)(1),d=(0,S.KR)(10),c=(0,S.KR)(!1),u=(0,S.KR)(!1),p=(0,S.KR)(!1),k=(0,S.KR)({}),m={username:"",email:"",password:"",role:"user",status:"inactive"},v=async()=>{a.value=!0;try{await new Promise((e=>setTimeout(e,800))),e.value=[{id:1,username:"ç®¡ç†å‘˜",email:"admin@example.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=admin",role:"admin",lastLogin:new Date(2023,9,15,8,30),status:"active"},{id:2,username:"è®¾è®¡å¸ˆå°ç‹",email:"designer@example.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=designer",role:"designer",lastLogin:new Date(2023,9,14,16,45),status:"active"},{id:3,username:"æ™®é€šç”¨æˆ·1",email:"user1@example.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=user1",role:"user",lastLogin:new Date(2023,9,10,12,20),status:"active"},{id:4,username:"æµ‹è¯•è´¦å·",email:"test@example.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=test",role:"user",lastLogin:new Date(2023,8,25,9,15),status:"locked"},{id:5,username:"æ–°ç”¨æˆ·",email:"newuser@example.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=newuser",role:"user",lastLogin:null,status:"inactive"}];for(let a=6;a<=30;a++){const t=["admin","designer","user"],s=["active","inactive","locked"];e.value.push({id:a,username:`ç”¨æˆ·${a}`,email:`user${a}@example.com`,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=user${a}`,role:t[Math.floor(Math.random()*t.length)],lastLogin:Math.random()>.2?new Date(2023,Math.floor(10*Math.random()),Math.floor(28*Math.random())):null,status:s[Math.floor(Math.random()*s.length)]})}}catch(t){console.error("è·å–ç”¨æˆ·æ•°æ®å¤±è´¥",t)}finally{a.value=!1}},g=(0,s.EW)((()=>{let a=[...e.value];if(t.value){const e=t.value.toLowerCase();a=a.filter((a=>a.username.toLowerCase().includes(e)||a.email.toLowerCase().includes(e)))}return i.value&&(a=a.filter((e=>e.role===i.value))),o.value&&(a=a.filter((e=>e.status===o.value))),a.sort(((e,a)=>{let t=e[l.value],s=a[l.value];return"lastLogin"===l.value&&(t=t||new Date(0),s=s||new Date(0)),t<s?"asc"===n.value?-1:1:t>s?"asc"===n.value?1:-1:0})),a})),L=(0,s.EW)((()=>Math.ceil(g.value.length/d.value))),f=(0,s.EW)((()=>{const e=(r.value-1)*d.value,a=e+d.value;return g.value.slice(e,a)})),b=(0,s.EW)((()=>{const e=L.value,a=r.value;return e<=7?Array.from({length:e},((e,a)=>a+1)):a<=3?[1,2,3,4,"...",e]:a>=e-2?[1,"...",e-3,e-2,e-1,e]:[1,"...",a-1,a,a+1,"...",e]}));(0,s.wB)([t,i,o],(()=>{r.value=1}));const h=e=>{l.value===e?n.value="asc"===n.value?"desc":"asc":(l.value=e,n.value="asc")},y=e=>{const a={admin:"ç®¡ç†å‘˜",designer:"è®¾è®¡å¸ˆ",user:"æ™®é€šç”¨æˆ·"};return a[e]||e},w=e=>{const a={active:"å·²æ¿€æ´»",inactive:"æœªæ¿€æ´»",locked:"å·²é”å®š"};return a[e]||e},C=e=>e?("string"===typeof e&&(e=new Date(e)),e.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})):"ä»æœªç™»å½•",_=e=>{k.value={...e},u.value=!0},D=e=>{k.value=e,p.value=!0},x=a=>{const t=e.value.findIndex((e=>e.id===a.id));if(-1!==t){const a={...e.value[t]};a.status="locked"===a.status?"active":"locked",e.value[t]=a}},E=a=>{const t=Math.max(...e.value.map((e=>e.id)),0)+1,s={...a,id:t,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${a.username}`,lastLogin:null};e.value.push(s),c.value=!1},A=a=>{const t=e.value.findIndex((e=>e.id===a.id));-1!==t&&(e.value[t]={...e.value[t],...a}),u.value=!1},F=()=>{e.value=e.value.filter((e=>e.id!==k.value.id)),p.value=!1};return(0,s.sV)((()=>{v()})),{users:e,loading:a,searchQuery:t,roleFilter:i,statusFilter:o,sortKey:l,sortOrder:n,currentPage:r,pageSize:d,filteredUsers:g,paginatedUsers:f,totalPages:L,displayedPages:b,showAddUserModal:c,showEditUserModal:u,showDeleteModal:p,selectedUser:k,newUser:m,sortBy:h,getRoleName:y,getStatusText:w,formatDate:C,editUser:_,confirmDelete:D,toggleUserLock:x,addUser:E,updateUser:A,deleteUser:F}}};const ie=(0,ee.A)(se,[["render",B],["__scopeId","data-v-1f8b1d8a"]]);var oe=ie},1218:function(e,a,t){t.d(a,{A:function(){return p}});var s=t(6768),i=t(4232);const o=["disabled"],l={key:0,class:"spinner"},n={key:1,class:"button-icon"};function r(e,a,t,r,d,c){return(0,s.uX)(),(0,s.CE)("button",{class:(0,i.C4)(["base-button",`size-${t.size}`,`variant-${t.variant}`,{"is-loading":t.loading,"is-block":t.block,"is-disabled":t.disabled}]),disabled:t.disabled||t.loading,onClick:a[0]||(a[0]=(...e)=>c.onClick&&c.onClick(...e))},[t.loading?((0,s.uX)(),(0,s.CE)("div",l)):e.$slots.icon?((0,s.uX)(),(0,s.CE)("span",n,[(0,s.RG)(e.$slots,"icon",{},void 0,!0)])):(0,s.Q3)("",!0),(0,s.Lk)("span",{class:(0,i.C4)(["button-content",{"with-icon":e.$slots.icon}])},[(0,s.RG)(e.$slots,"default",{},void 0,!0)],2)],10,o)}var d={name:"BaseButton",props:{variant:{type:String,default:"primary",validator:e=>["primary","secondary","outline","danger","text"].includes(e)},size:{type:String,default:"medium",validator:e=>["small","medium","large"].includes(e)},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},block:{type:Boolean,default:!1}},methods:{onClick(e){this.disabled||this.loading||this.$emit("click",e)}}},c=t(1241);const u=(0,c.A)(d,[["render",r],["__scopeId","data-v-3e57e3e8"]]);var p=u},3394:function(e,a,t){t.d(a,{A:function(){return K}});var s=t(6768),i=t(4232);const o={class:"role-permissions"},l={class:"section-header"},n={class:"permissions-container"},r={class:"role-selector"},d={class:"role-options"},c=["onClick"],u={class:"role-details"},p={class:"role-name"},k={class:"role-desc"},m={class:"permission-settings"},v={class:"selected-role-header"},g={class:"header-actions"},L={class:"permission-groups"},f={class:"group-header"},b={class:"group-icon"},h={class:"group-actions"},y={class:"toggle-all"},w=["checked","onChange"],C={class:"permissions-list"},_={class:"permission-checkbox"},D=["id","checked","onChange"],x=["for"],E={class:"permission-desc"},A={class:"save-actions"};function F(e,a,t,F,P,U){const M=(0,s.g2)("BaseButton"),R=(0,s.g2)("BaseCard");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("div",l,[a[3]||(a[3]=(0,s.Lk)("h2",null,"æƒé™ç®¡ç†",-1)),(0,s.bF)(M,{variant:"primary",size:"small",onClick:F.savePermissions,loading:F.saving},{default:(0,s.k6)((()=>a[2]||(a[2]=[(0,s.eW)(" ä¿å­˜æƒé™è®¾ç½® ")]))),_:1},8,["onClick","loading"])]),(0,s.Lk)("div",n,[(0,s.Lk)("div",r,[a[4]||(a[4]=(0,s.Lk)("h3",null,"é€‰æ‹©è§’è‰²",-1)),(0,s.Lk)("div",d,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(F.roles,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:(0,i.C4)(["role-option",{active:F.selectedRole.id===e.id}]),onClick:a=>F.selectRole(e)},[(0,s.Lk)("div",{class:(0,i.C4)(["role-icon",e.id])},(0,i.v_)(e.icon),3),(0,s.Lk)("div",u,[(0,s.Lk)("div",p,(0,i.v_)(e.name),1),(0,s.Lk)("div",k,(0,i.v_)(e.description),1)])],10,c)))),128))])]),(0,s.Lk)("div",m,[(0,s.Lk)("div",v,[(0,s.Lk)("h3",null,(0,i.v_)(F.selectedRole.name)+" æƒé™è®¾ç½®",1),(0,s.Lk)("div",g,[(0,s.Lk)("button",{class:"action-link",onClick:a[0]||(a[0]=(...e)=>F.selectAll&&F.selectAll(...e))},"å…¨é€‰"),a[5]||(a[5]=(0,s.Lk)("span",{class:"divider"},"|",-1)),(0,s.Lk)("button",{class:"action-link",onClick:a[1]||(a[1]=(...e)=>F.deselectAll&&F.deselectAll(...e))},"å–æ¶ˆå…¨é€‰")])]),(0,s.Lk)("div",L,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(F.permissionGroups,((e,a)=>((0,s.uX)(),(0,s.Wv)(R,{key:a,class:"permission-group"},{header:(0,s.k6)((()=>[(0,s.Lk)("div",f,[(0,s.Lk)("span",b,(0,i.v_)(e.icon),1),(0,s.Lk)("h4",null,(0,i.v_)(e.name),1),(0,s.Lk)("div",h,[(0,s.Lk)("label",y,[(0,s.Lk)("input",{type:"checkbox",checked:F.isGroupChecked(a),onChange:e=>F.toggleGroup(a,e.target.checked)},null,40,w),(0,s.eW)(" "+(0,i.v_)(F.isGroupChecked(a)?"å–æ¶ˆæ‰€æœ‰":"é€‰æ‹©æ‰€æœ‰"),1)])])])])),default:(0,s.k6)((()=>[(0,s.Lk)("div",C,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.permissions,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"permission-item"},[(0,s.Lk)("div",_,[(0,s.Lk)("input",{type:"checkbox",id:e.id,checked:F.hasPermission(e.id),onChange:a=>F.togglePermission(e.id,a.target.checked)},null,40,D),(0,s.Lk)("label",{for:e.id},(0,i.v_)(e.name),9,x)]),(0,s.Lk)("div",E,(0,i.v_)(e.description),1)])))),128))])])),_:2},1024)))),128))])])]),(0,s.Lk)("div",A,[(0,s.bF)(M,{variant:"outline",onClick:F.resetPermissions},{default:(0,s.k6)((()=>a[6]||(a[6]=[(0,s.eW)(" é‡ç½®æ›´æ”¹ ")]))),_:1},8,["onClick"]),(0,s.bF)(M,{variant:"primary",onClick:F.savePermissions,loading:F.saving},{default:(0,s.k6)((()=>a[7]||(a[7]=[(0,s.eW)(" ä¿å­˜æƒé™è®¾ç½® ")]))),_:1},8,["onClick","loading"])])])}t(4114),t(8111),t(1148),t(2489),t(7588),t(1701);var P=t(144),U=t(1218),M=t(4693),R={name:"RolePermissions",components:{BaseButton:U.A,BaseCard:M.A},setup(){const e=(0,P.KR)(!1),a=[{id:"admin",name:"ç®¡ç†å‘˜",icon:"ğŸ‘‘",description:"ç³»ç»Ÿæœ€é«˜æƒé™ï¼Œå¯æ‰§è¡Œæ‰€æœ‰æ“ä½œ"},{id:"designer",name:"è®¾è®¡å¸ˆ",icon:"ğŸ¨",description:"å¯ä»¥ä½¿ç”¨è®¾è®¡ç›¸å…³åŠŸèƒ½å’Œç®¡ç†æ¨¡å‹"},{id:"user",name:"æ™®é€šç”¨æˆ·",icon:"ğŸ‘¤",description:"åŸºç¡€åŠŸèƒ½ä½¿ç”¨æƒé™"},{id:"guest",name:"è®¿å®¢",icon:"ğŸ‘“",description:"åªè¯»æƒé™ï¼Œæ— æ³•è¿›è¡Œæ“ä½œ"}],t={system:{name:"ç³»ç»Ÿç®¡ç†",icon:"âš™ï¸",permissions:[{id:"system:view",name:"æŸ¥çœ‹ç³»ç»Ÿè®¾ç½®",description:"å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿè®¾ç½®é¡µé¢"},{id:"system:edit",name:"ç¼–è¾‘ç³»ç»Ÿè®¾ç½®",description:"å¯ä»¥ä¿®æ”¹ç³»ç»ŸåŸºæœ¬è®¾ç½®"},{id:"system:security",name:"å®‰å…¨è®¾ç½®",description:"å¯ä»¥é…ç½®ç³»ç»Ÿå®‰å…¨ç›¸å…³è®¾ç½®"},{id:"system:api",name:"APIè®¾ç½®",description:"å¯ä»¥é…ç½®APIç›¸å…³è®¾ç½®"},{id:"system:logs",name:"æŸ¥çœ‹æ—¥å¿—",description:"å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—"},{id:"system:backup",name:"æ•°æ®å¤‡ä»½",description:"å¯ä»¥æ‰§è¡Œå’Œæ¢å¤æ•°æ®å¤‡ä»½"}]},user:{name:"ç”¨æˆ·ç®¡ç†",icon:"ğŸ‘¥",permissions:[{id:"user:view",name:"æŸ¥çœ‹ç”¨æˆ·",description:"å¯ä»¥æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨å’Œè¯¦æƒ…"},{id:"user:create",name:"åˆ›å»ºç”¨æˆ·",description:"å¯ä»¥åˆ›å»ºæ–°ç”¨æˆ·"},{id:"user:edit",name:"ç¼–è¾‘ç”¨æˆ·",description:"å¯ä»¥ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯"},{id:"user:delete",name:"åˆ é™¤ç”¨æˆ·",description:"å¯ä»¥åˆ é™¤ç”¨æˆ·"},{id:"user:lock",name:"é”å®šç”¨æˆ·",description:"å¯ä»¥é”å®š/è§£é”ç”¨æˆ·è´¦å·"}]},role:{name:"è§’è‰²æƒé™",icon:"ğŸ”",permissions:[{id:"role:view",name:"æŸ¥çœ‹è§’è‰²",description:"å¯ä»¥æŸ¥çœ‹è§’è‰²åˆ—è¡¨å’Œæƒé™"},{id:"role:create",name:"åˆ›å»ºè§’è‰²",description:"å¯ä»¥åˆ›å»ºæ–°è§’è‰²"},{id:"role:edit",name:"ç¼–è¾‘è§’è‰²",description:"å¯ä»¥ç¼–è¾‘è§’è‰²ä¿¡æ¯å’Œæƒé™"},{id:"role:delete",name:"åˆ é™¤è§’è‰²",description:"å¯ä»¥åˆ é™¤è§’è‰²"},{id:"role:assign",name:"åˆ†é…è§’è‰²",description:"å¯ä»¥ä¸ºç”¨æˆ·åˆ†é…è§’è‰²"}]},design:{name:"æ™ºèƒ½è®¾è®¡",icon:"âœ¨",permissions:[{id:"design:view",name:"æŸ¥çœ‹è®¾è®¡",description:"å¯ä»¥æŸ¥çœ‹è®¾è®¡é¡¹ç›®"},{id:"design:create",name:"åˆ›å»ºè®¾è®¡",description:"å¯ä»¥åˆ›å»ºæ–°è®¾è®¡é¡¹ç›®"},{id:"design:edit",name:"ç¼–è¾‘è®¾è®¡",description:"å¯ä»¥ç¼–è¾‘è®¾è®¡é¡¹ç›®"},{id:"design:delete",name:"åˆ é™¤è®¾è®¡",description:"å¯ä»¥åˆ é™¤è®¾è®¡é¡¹ç›®"},{id:"design:share",name:"åˆ†äº«è®¾è®¡",description:"å¯ä»¥åˆ†äº«è®¾è®¡é¡¹ç›®ç»™å…¶ä»–ç”¨æˆ·"},{id:"design:export",name:"å¯¼å‡ºè®¾è®¡",description:"å¯ä»¥å¯¼å‡ºè®¾è®¡é¡¹ç›®"}]},model:{name:"æ¨¡å‹ç®¡ç†",icon:"ğŸ‘—",permissions:[{id:"model:view",name:"æŸ¥çœ‹æ¨¡å‹",description:"å¯ä»¥æŸ¥çœ‹æœè£…æ¨¡å‹"},{id:"model:create",name:"åˆ›å»ºæ¨¡å‹",description:"å¯ä»¥åˆ›å»ºæ–°æ¨¡å‹"},{id:"model:edit",name:"ç¼–è¾‘æ¨¡å‹",description:"å¯ä»¥ç¼–è¾‘æ¨¡å‹ä¿¡æ¯"},{id:"model:delete",name:"åˆ é™¤æ¨¡å‹",description:"å¯ä»¥åˆ é™¤æ¨¡å‹"},{id:"model:train",name:"è®­ç»ƒæ¨¡å‹",description:"å¯ä»¥æ‰§è¡Œæ¨¡å‹è®­ç»ƒä»»åŠ¡"}]},content:{name:"å†…å®¹ç”Ÿæˆ",icon:"ğŸ’¬",permissions:[{id:"content:propaganda",name:"å®£ä¼ è¯æœ¯",description:"å¯ä»¥ä½¿ç”¨å®£ä¼ è¯æœ¯ç”ŸæˆåŠŸèƒ½"},{id:"content:animation",name:"åŠ¨å›¾ç”Ÿæˆ",description:"å¯ä»¥ä½¿ç”¨åŠ¨å›¾ç”ŸæˆåŠŸèƒ½"},{id:"content:video",name:"è§†é¢‘ç”Ÿæˆ",description:"å¯ä»¥ä½¿ç”¨è§†é¢‘ç”ŸæˆåŠŸèƒ½"},{id:"content:export",name:"å¯¼å‡ºå†…å®¹",description:"å¯ä»¥å¯¼å‡ºç”Ÿæˆçš„å†…å®¹"}]}},s={admin:["system:view","system:edit","system:security","system:api","system:logs","system:backup","user:view","user:create","user:edit","user:delete","user:lock","role:view","role:create","role:edit","role:delete","role:assign","design:view","design:create","design:edit","design:delete","design:share","design:export","model:view","model:create","model:edit","model:delete","model:train","content:propaganda","content:animation","content:video","content:export"],designer:["system:view","user:view","role:view","design:view","design:create","design:edit","design:share","design:export","model:view","model:create","model:edit","model:train","content:propaganda","content:animation","content:video","content:export"],user:["design:view","design:create","design:edit","model:view","content:propaganda","content:animation","content:video"],guest:["design:view","model:view"]},i=(0,P.KR)(a[0]),o=(0,P.Kh)(JSON.parse(JSON.stringify(s))),l=e=>{i.value=e},n=e=>o[i.value.id].includes(e),r=(e,a)=>{const t=o[i.value.id];if(a&&!t.includes(e))t.push(e);else if(!a&&t.includes(e)){const a=t.indexOf(e);t.splice(a,1)}},d=e=>{const a=t[e].permissions.map((e=>e.id)),s=o[i.value.id];return a.every((e=>s.includes(e)))},c=(e,a)=>{const s=t[e].permissions.map((e=>e.id)),l=o[i.value.id];a?s.forEach((e=>{l.includes(e)||l.push(e)})):o[i.value.id]=l.filter((e=>!s.includes(e)))},u=()=>{const e=[];Object.values(t).forEach((a=>{a.permissions.forEach((a=>{e.push(a.id)}))})),o[i.value.id]=[...e]},p=()=>{o[i.value.id]=[]},k=()=>{Object.keys(s).forEach((e=>{o[e]=[...s[e]]}))},m=async()=>{e.value=!0;try{await new Promise((e=>setTimeout(e,1e3))),alert("æƒé™è®¾ç½®å·²ä¿å­˜")}catch(a){console.error("ä¿å­˜æƒé™å¤±è´¥",a),alert("ä¿å­˜æƒé™å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{e.value=!1}};return{roles:a,permissionGroups:t,selectedRole:i,saving:e,selectRole:l,hasPermission:n,togglePermission:r,isGroupChecked:d,toggleGroup:c,selectAll:u,deselectAll:p,resetPermissions:k,savePermissions:m}}},B=t(1241);const S=(0,B.A)(R,[["render",F],["__scopeId","data-v-bf552d44"]]);var K=S},4121:function(e,a,t){t.d(a,{A:function(){return m}});var s=t(6768),i=t(4232),o=t(5130);const l={class:"modal-header"},n={class:"modal-title"},r={class:"modal-body"},d={key:0,class:"modal-footer"};function c(e,a,t,c,u,p){return(0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,s.Lk)("div",{class:"modal-backdrop",onClick:a[2]||(a[2]=a=>t.closeOnBackdrop&&e.$emit("close"))},[(0,s.Lk)("div",{class:(0,i.C4)(["modal",{"modal-lg":"large"===t.size,"modal-sm":"small"===t.size}]),onClick:a[1]||(a[1]=(0,o.D$)((()=>{}),["stop"]))},[(0,s.Lk)("div",l,[(0,s.Lk)("h3",n,(0,i.v_)(t.title),1),(0,s.Lk)("button",{class:"close-button",onClick:a[0]||(a[0]=a=>e.$emit("close")),"aria-label":"å…³é—­"}," Ã— ")]),(0,s.Lk)("div",r,[(0,s.RG)(e.$slots,"default",{},void 0,!0)]),e.$slots.footer?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.RG)(e.$slots,"footer",{},void 0,!0)])):(0,s.Q3)("",!0)],2)])])}var u={name:"BaseModal",props:{title:{type:String,default:""},size:{type:String,default:"medium",validator:e=>["small","medium","large"].includes(e)},closeOnBackdrop:{type:Boolean,default:!0}},setup(e,{emit:a}){const t=e=>{"Escape"===e.key&&a("close")},i=()=>{document.body.style.overflow="hidden",document.body.style.paddingRight=window.innerWidth-document.documentElement.clientWidth+"px"},o=()=>{document.body.style.overflow="",document.body.style.paddingRight=""};return(0,s.sV)((()=>{(0,s.dY)((()=>{window.addEventListener("keydown",t),i()}))})),(0,s.xo)((()=>{window.removeEventListener("keydown",t),o()})),{}}},p=t(1241);const k=(0,p.A)(u,[["render",c],["__scopeId","data-v-92fc2702"]]);var m=k},4693:function(e,a,t){t.d(a,{A:function(){return p}});var s=t(6768),i=t(4232);const o={key:0,class:"card-header"},l={class:"card-body"},n={key:1,class:"card-footer"};function r(e,a,t,r,d,c){return(0,s.uX)(),(0,s.CE)("div",{class:(0,i.C4)(["base-card",[`shadow-${t.shadow}`,`padding-${t.padding}`,{"is-hoverable":t.hoverable}]])},[e.$slots.header?((0,s.uX)(),(0,s.CE)("div",o,[(0,s.RG)(e.$slots,"header",{},void 0,!0)])):(0,s.Q3)("",!0),(0,s.Lk)("div",l,[(0,s.RG)(e.$slots,"default",{},void 0,!0)]),e.$slots.footer?((0,s.uX)(),(0,s.CE)("div",n,[(0,s.RG)(e.$slots,"footer",{},void 0,!0)])):(0,s.Q3)("",!0)],2)}var d={name:"BaseCard",props:{shadow:{type:String,default:"medium",validator:e=>["none","small","medium","large"].includes(e)},padding:{type:String,default:"medium",validator:e=>["none","small","medium","large"].includes(e)},hoverable:{type:Boolean,default:!1}}},c=t(1241);const u=(0,c.A)(d,[["render",r],["__scopeId","data-v-319b78ad"]]);var p=u},7429:function(e,a,t){t.d(a,{A:function(){return re}});var s=t(6768),i=t(5130),o=t(4232);const l={class:"system-settings"},n={class:"section-header"},r={class:"settings-container"},d={class:"settings-form"},c={class:"form-group"},u={class:"form-group"},p={class:"logo-upload"},k=["src"],m={key:1,class:"no-logo"},v={class:"form-group"},g={class:"theme-selector"},L={class:"settings-form"},f={class:"form-group"},b={class:"toggle-switch"},h={class:"toggle-text"},y={class:"form-group"},w={class:"form-group"},C={class:"form-group"},_={class:"toggle-switch"},D={class:"toggle-text"},x={key:0,class:"lock-settings"},E={class:"form-row"},A={class:"form-row"},F={class:"settings-form"},P={class:"form-group"},U={class:"form-group"},M={class:"api-key-input"},R={class:"form-group"},B={class:"form-group"},S={class:"ai-features"},K={class:"feature-item"},T={class:"feature-item"},X={class:"feature-item"},W={class:"feature-item"},V={class:"feature-item"},I={class:"settings-form"},$={class:"form-group"},z={key:0,class:"form-group"},O={key:1,class:"form-group"},Q={class:"form-group"},N={class:"notification-types"},J={class:"notification-item"},G={class:"notification-item"},H={class:"notification-item"},q={class:"actions-bar"},j={class:"reset-confirm"},Y={class:"modal-actions"},Z={key:1,class:"success-notification"};function ee(e,a,t,ee,ae,te){const se=(0,s.g2)("BaseButton"),ie=(0,s.g2)("BaseCard"),oe=(0,s.g2)("BaseModal");return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("div",n,[a[28]||(a[28]=(0,s.Lk)("h2",null,"ç³»ç»Ÿè®¾ç½®",-1)),(0,s.bF)(se,{size:"small",variant:"primary",loading:ee.saving,onClick:ee.saveSettings},{default:(0,s.k6)((()=>a[27]||(a[27]=[(0,s.eW)(" ä¿å­˜è®¾ç½® ")]))),_:1},8,["loading","onClick"])]),(0,s.Lk)("div",r,[(0,s.bF)(ie,{class:"settings-card"},{header:(0,s.k6)((()=>a[29]||(a[29]=[(0,s.Lk)("div",{class:"card-header-title"},[(0,s.Lk)("span",{class:"header-icon"},"ğŸ”§"),(0,s.Lk)("h3",null,"åŸºæœ¬è®¾ç½®")],-1)]))),default:(0,s.k6)((()=>[(0,s.Lk)("div",d,[(0,s.Lk)("div",c,[a[30]||(a[30]=(0,s.Lk)("label",{for:"siteName"},"ç³»ç»Ÿåç§°",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"siteName","onUpdate:modelValue":a[0]||(a[0]=e=>ee.settings.basic.siteName=e)},null,512),[[i.Jo,ee.settings.basic.siteName]]),a[31]||(a[31]=(0,s.Lk)("p",{class:"form-hint"},"æ˜¾ç¤ºåœ¨æµè§ˆå™¨æ ‡ç­¾å’Œç™»å½•é¡µä¸Šçš„ç³»ç»Ÿåç§°",-1))]),(0,s.Lk)("div",u,[a[33]||(a[33]=(0,s.Lk)("label",{for:"logoUrl"},"ç³»ç»ŸLogo",-1)),(0,s.Lk)("div",p,[ee.settings.basic.logoUrl?((0,s.uX)(),(0,s.CE)("img",{key:0,src:ee.settings.basic.logoUrl,alt:"ç³»ç»ŸLogo",class:"preview-logo"},null,8,k)):((0,s.uX)(),(0,s.CE)("div",m,"æ— Logo")),(0,s.bF)(se,{variant:"outline",size:"small",onClick:ee.triggerLogoUpload},{default:(0,s.k6)((()=>a[32]||(a[32]=[(0,s.eW)(" ä¸Šä¼ Logo ")]))),_:1},8,["onClick"]),(0,s.Lk)("input",{type:"file",ref:"logoInput",style:{display:"none"},accept:"image/*",onChange:a[1]||(a[1]=(...e)=>ee.handleLogoUpload&&ee.handleLogoUpload(...e))},null,544)])]),(0,s.Lk)("div",v,[a[36]||(a[36]=(0,s.Lk)("label",{for:"defaultTheme"},"é»˜è®¤ä¸»é¢˜",-1)),(0,s.Lk)("div",g,[(0,s.Lk)("div",{class:(0,o.C4)(["theme-option",{active:"light"===ee.settings.basic.defaultTheme}]),onClick:a[2]||(a[2]=e=>ee.selectTheme("light"))},a[34]||(a[34]=[(0,s.Lk)("div",{class:"theme-preview light-theme"},null,-1),(0,s.Lk)("span",null,"äº®è‰²ä¸»é¢˜",-1)]),2),(0,s.Lk)("div",{class:(0,o.C4)(["theme-option",{active:"dark"===ee.settings.basic.defaultTheme}]),onClick:a[3]||(a[3]=e=>ee.selectTheme("dark"))},a[35]||(a[35]=[(0,s.Lk)("div",{class:"theme-preview dark-theme"},null,-1),(0,s.Lk)("span",null,"æš—è‰²ä¸»é¢˜",-1)]),2)])])])])),_:1}),(0,s.bF)(ie,{class:"settings-card"},{header:(0,s.k6)((()=>a[37]||(a[37]=[(0,s.Lk)("div",{class:"card-header-title"},[(0,s.Lk)("span",{class:"header-icon"},"ğŸ›¡ï¸"),(0,s.Lk)("h3",null,"å®‰å…¨è®¾ç½®")],-1)]))),default:(0,s.k6)((()=>[(0,s.Lk)("div",L,[(0,s.Lk)("div",f,[a[39]||(a[39]=(0,s.Lk)("label",null,"åŒå› ç´ è®¤è¯",-1)),(0,s.Lk)("div",b,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"twoFactorAuth","onUpdate:modelValue":a[4]||(a[4]=e=>ee.settings.security.twoFactorAuth=e)},null,512),[[i.lH,ee.settings.security.twoFactorAuth]]),a[38]||(a[38]=(0,s.Lk)("label",{for:"twoFactorAuth",class:"toggle-label"},null,-1)),(0,s.Lk)("span",h,(0,o.v_)(ee.settings.security.twoFactorAuth?"å·²å¯ç”¨":"å·²ç¦ç”¨"),1)]),a[40]||(a[40]=(0,s.Lk)("p",{class:"form-hint"},"å¯ç”¨åï¼Œç”¨æˆ·ç™»å½•éœ€è¦é¢å¤–çš„éªŒè¯ç æˆ–å…¶ä»–å®‰å…¨éªŒè¯",-1))]),(0,s.Lk)("div",y,[a[41]||(a[41]=(0,s.Lk)("label",{for:"sessionTimeout"},"ä¼šè¯è¶…æ—¶æ—¶é—´(åˆ†é’Ÿ)",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number",id:"sessionTimeout","onUpdate:modelValue":a[5]||(a[5]=e=>ee.settings.security.sessionTimeout=e),min:"5",max:"1440"},null,512),[[i.Jo,ee.settings.security.sessionTimeout,void 0,{number:!0}]]),a[42]||(a[42]=(0,s.Lk)("p",{class:"form-hint"},"ç”¨æˆ·æ— æ“ä½œæ—¶è‡ªåŠ¨é€€å‡ºç™»å½•çš„æ—¶é—´ï¼Œå»ºè®®30-120åˆ†é’Ÿ",-1))]),(0,s.Lk)("div",w,[a[44]||(a[44]=(0,s.Lk)("label",{for:"passwordPolicy"},"å¯†ç ç­–ç•¥",-1)),(0,s.bo)((0,s.Lk)("select",{id:"passwordPolicy","onUpdate:modelValue":a[6]||(a[6]=e=>ee.settings.security.passwordPolicy=e)},a[43]||(a[43]=[(0,s.Lk)("option",{value:"low"},"ä½å¼ºåº¦ (6ä½ä»¥ä¸Šï¼Œæ— é™åˆ¶)",-1),(0,s.Lk)("option",{value:"medium"},"ä¸­å¼ºåº¦ (8ä½ä»¥ä¸Šï¼Œéœ€åŒ…å«å­—æ¯å’Œæ•°å­—)",-1),(0,s.Lk)("option",{value:"high"},"é«˜å¼ºåº¦ (10ä½ä»¥ä¸Šï¼Œéœ€åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šç¬¦å·)",-1)]),512),[[i.u1,ee.settings.security.passwordPolicy]])]),(0,s.Lk)("div",C,[a[48]||(a[48]=(0,s.Lk)("label",null,"ç™»å½•å¤±è´¥é”å®š",-1)),(0,s.Lk)("div",_,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"loginLockEnabled","onUpdate:modelValue":a[7]||(a[7]=e=>ee.settings.security.loginLock.enabled=e)},null,512),[[i.lH,ee.settings.security.loginLock.enabled]]),a[45]||(a[45]=(0,s.Lk)("label",{for:"loginLockEnabled",class:"toggle-label"},null,-1)),(0,s.Lk)("span",D,(0,o.v_)(ee.settings.security.loginLock.enabled?"å·²å¯ç”¨":"å·²ç¦ç”¨"),1)]),ee.settings.security.loginLock.enabled?((0,s.uX)(),(0,s.CE)("div",x,[(0,s.Lk)("div",E,[a[46]||(a[46]=(0,s.Lk)("label",{for:"maxAttempts"},"è¿ç»­å¤±è´¥æ¬¡æ•°:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number",id:"maxAttempts","onUpdate:modelValue":a[8]||(a[8]=e=>ee.settings.security.loginLock.maxAttempts=e),min:"3",max:"10"},null,512),[[i.Jo,ee.settings.security.loginLock.maxAttempts,void 0,{number:!0}]])]),(0,s.Lk)("div",A,[a[47]||(a[47]=(0,s.Lk)("label",{for:"lockDuration"},"é”å®šæ—¶é•¿(åˆ†é’Ÿ):",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number",id:"lockDuration","onUpdate:modelValue":a[9]||(a[9]=e=>ee.settings.security.loginLock.lockDuration=e),min:"5",max:"1440"},null,512),[[i.Jo,ee.settings.security.loginLock.lockDuration,void 0,{number:!0}]])])])):(0,s.Q3)("",!0)])])])),_:1}),(0,s.bF)(ie,{class:"settings-card"},{header:(0,s.k6)((()=>a[49]||(a[49]=[(0,s.Lk)("div",{class:"card-header-title"},[(0,s.Lk)("span",{class:"header-icon"},"ğŸ¤–"),(0,s.Lk)("h3",null,"AIè®¾ç½®")],-1)]))),default:(0,s.k6)((()=>[(0,s.Lk)("div",F,[(0,s.Lk)("div",P,[a[51]||(a[51]=(0,s.Lk)("label",{for:"apiProvider"},"AI APIæä¾›å•†",-1)),(0,s.bo)((0,s.Lk)("select",{id:"apiProvider","onUpdate:modelValue":a[10]||(a[10]=e=>ee.settings.ai.apiProvider=e)},a[50]||(a[50]=[(0,s.Lk)("option",{value:"openai"},"OpenAI",-1),(0,s.Lk)("option",{value:"azure"},"Azure OpenAI",-1),(0,s.Lk)("option",{value:"other"},"å…¶ä»–æä¾›å•†",-1)]),512),[[i.u1,ee.settings.ai.apiProvider]])]),(0,s.Lk)("div",U,[a[52]||(a[52]=(0,s.Lk)("label",{for:"apiKey"},"APIå¯†é’¥",-1)),(0,s.Lk)("div",M,[(0,s.bo)((0,s.Lk)("input",{type:"password",id:"apiKey","onUpdate:modelValue":a[11]||(a[11]=e=>ee.settings.ai.apiKey=e),placeholder:"è¾“å…¥APIå¯†é’¥"},null,512),[[i.Jo,ee.settings.ai.apiKey]]),(0,s.Lk)("button",{type:"button",class:"view-key-btn",onClick:a[12]||(a[12]=e=>ee.showApiKey=!ee.showApiKey)},(0,o.v_)(ee.showApiKey?"éšè—":"æŸ¥çœ‹"),1)]),a[53]||(a[53]=(0,s.Lk)("p",{class:"form-hint"},"è¯·ä¿æŠ¤å¥½æ‚¨çš„APIå¯†é’¥ï¼Œä¸è¦æ³„éœ²ç»™ä»–äºº",-1))]),(0,s.Lk)("div",R,[a[55]||(a[55]=(0,s.Lk)("label",{for:"defaultModel"},"é»˜è®¤æ¨¡å‹",-1)),(0,s.bo)((0,s.Lk)("select",{id:"defaultModel","onUpdate:modelValue":a[13]||(a[13]=e=>ee.settings.ai.defaultModel=e)},a[54]||(a[54]=[(0,s.Lk)("option",{value:"gpt-3.5-turbo"},"GPT-3.5 Turbo",-1),(0,s.Lk)("option",{value:"gpt-4"},"GPT-4",-1),(0,s.Lk)("option",{value:"gpt-4-turbo"},"GPT-4 Turbo",-1),(0,s.Lk)("option",{value:"claude-3"},"Claude 3",-1)]),512),[[i.u1,ee.settings.ai.defaultModel]])]),(0,s.Lk)("div",B,[a[61]||(a[61]=(0,s.Lk)("label",null,"å¯ç”¨AIåŠŸèƒ½",-1)),(0,s.Lk)("div",S,[(0,s.Lk)("div",K,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"featureDesign","onUpdate:modelValue":a[14]||(a[14]=e=>ee.settings.ai.enabledFeatures.design=e)},null,512),[[i.lH,ee.settings.ai.enabledFeatures.design]]),a[56]||(a[56]=(0,s.Lk)("label",{for:"featureDesign"},"æ™ºèƒ½è®¾è®¡",-1))]),(0,s.Lk)("div",T,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"featurePropaganda","onUpdate:modelValue":a[15]||(a[15]=e=>ee.settings.ai.enabledFeatures.propaganda=e)},null,512),[[i.lH,ee.settings.ai.enabledFeatures.propaganda]]),a[57]||(a[57]=(0,s.Lk)("label",{for:"featurePropaganda"},"å®£ä¼ è¯æœ¯ç”Ÿæˆ",-1))]),(0,s.Lk)("div",X,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"featureConversion","onUpdate:modelValue":a[16]||(a[16]=e=>ee.settings.ai.enabledFeatures.modelConversion=e)},null,512),[[i.lH,ee.settings.ai.enabledFeatures.modelConversion]]),a[58]||(a[58]=(0,s.Lk)("label",{for:"featureConversion"},"æ¨¡ç‰¹æ¢è£…",-1))]),(0,s.Lk)("div",W,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"featureAnimation","onUpdate:modelValue":a[17]||(a[17]=e=>ee.settings.ai.enabledFeatures.animation=e)},null,512),[[i.lH,ee.settings.ai.enabledFeatures.animation]]),a[59]||(a[59]=(0,s.Lk)("label",{for:"featureAnimation"},"åŠ¨å›¾ç”Ÿæˆ",-1))]),(0,s.Lk)("div",V,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"featureVideo","onUpdate:modelValue":a[18]||(a[18]=e=>ee.settings.ai.enabledFeatures.video=e)},null,512),[[i.lH,ee.settings.ai.enabledFeatures.video]]),a[60]||(a[60]=(0,s.Lk)("label",{for:"featureVideo"},"è§†é¢‘ç”Ÿæˆ",-1))])])])])])),_:1}),(0,s.bF)(ie,{class:"settings-card"},{header:(0,s.k6)((()=>a[62]||(a[62]=[(0,s.Lk)("div",{class:"card-header-title"},[(0,s.Lk)("span",{class:"header-icon"},"ğŸ“¨"),(0,s.Lk)("h3",null,"é€šçŸ¥è®¾ç½®")],-1)]))),default:(0,s.k6)((()=>[(0,s.Lk)("div",I,[(0,s.Lk)("div",$,[a[64]||(a[64]=(0,s.Lk)("label",{for:"emailService"},"é‚®ä»¶æœåŠ¡é…ç½®",-1)),(0,s.bo)((0,s.Lk)("select",{id:"emailService","onUpdate:modelValue":a[19]||(a[19]=e=>ee.settings.notification.emailService=e)},a[63]||(a[63]=[(0,s.Lk)("option",{value:"smtp"},"SMTP",-1),(0,s.Lk)("option",{value:"sendgrid"},"SendGrid",-1),(0,s.Lk)("option",{value:"aliyun"},"é˜¿é‡Œäº‘é‚®ä»¶",-1)]),512),[[i.u1,ee.settings.notification.emailService]])]),"smtp"===ee.settings.notification.emailService?((0,s.uX)(),(0,s.CE)("div",z,[a[65]||(a[65]=(0,s.Lk)("label",{for:"smtpServer"},"SMTPæœåŠ¡å™¨",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"smtpServer","onUpdate:modelValue":a[20]||(a[20]=e=>ee.settings.notification.smtp.server=e),placeholder:"smtp.example.com"},null,512),[[i.Jo,ee.settings.notification.smtp.server]])])):(0,s.Q3)("",!0),"smtp"===ee.settings.notification.emailService?((0,s.uX)(),(0,s.CE)("div",O,[a[66]||(a[66]=(0,s.Lk)("label",{for:"smtpPort"},"SMTPç«¯å£",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number",id:"smtpPort","onUpdate:modelValue":a[21]||(a[21]=e=>ee.settings.notification.smtp.port=e),placeholder:"587"},null,512),[[i.Jo,ee.settings.notification.smtp.port,void 0,{number:!0}]])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Q,[a[70]||(a[70]=(0,s.Lk)("label",null,"é€šçŸ¥ç±»å‹",-1)),(0,s.Lk)("div",N,[(0,s.Lk)("div",J,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"notifyLogin","onUpdate:modelValue":a[22]||(a[22]=e=>ee.settings.notification.types.login=e)},null,512),[[i.lH,ee.settings.notification.types.login]]),a[67]||(a[67]=(0,s.Lk)("label",{for:"notifyLogin"},"ç™»å½•é€šçŸ¥",-1))]),(0,s.Lk)("div",G,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"notifyTask","onUpdate:modelValue":a[23]||(a[23]=e=>ee.settings.notification.types.task=e)},null,512),[[i.lH,ee.settings.notification.types.task]]),a[68]||(a[68]=(0,s.Lk)("label",{for:"notifyTask"},"ä»»åŠ¡å®Œæˆé€šçŸ¥",-1))]),(0,s.Lk)("div",H,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"notifySystem","onUpdate:modelValue":a[24]||(a[24]=e=>ee.settings.notification.types.system=e)},null,512),[[i.lH,ee.settings.notification.types.system]]),a[69]||(a[69]=(0,s.Lk)("label",{for:"notifySystem"},"ç³»ç»Ÿé€šçŸ¥",-1))])])])])])),_:1})]),(0,s.Lk)("div",q,[(0,s.bF)(se,{variant:"outline",onClick:ee.resetSettings},{default:(0,s.k6)((()=>a[71]||(a[71]=[(0,s.eW)(" é‡ç½®é»˜è®¤ ")]))),_:1},8,["onClick"]),(0,s.bF)(se,{variant:"primary",loading:ee.saving,onClick:ee.saveSettings},{default:(0,s.k6)((()=>a[72]||(a[72]=[(0,s.eW)(" ä¿å­˜è®¾ç½® ")]))),_:1},8,["loading","onClick"])]),ee.showResetModal?((0,s.uX)(),(0,s.Wv)(oe,{key:0,title:"ç¡®è®¤é‡ç½®",onClose:a[26]||(a[26]=e=>ee.showResetModal=!1)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",j,[a[75]||(a[75]=(0,s.Lk)("p",null,"æ‚¨ç¡®å®šè¦å°†æ‰€æœ‰è®¾ç½®é‡ç½®ä¸ºé»˜è®¤å€¼å—ï¼Ÿ",-1)),a[76]||(a[76]=(0,s.Lk)("p",{class:"warning"},"æ­¤æ“ä½œä¸å¯é€†ï¼Œæ‰€æœ‰è‡ªå®šä¹‰è®¾ç½®å°†ä¼šä¸¢å¤±ï¼",-1)),(0,s.Lk)("div",Y,[(0,s.bF)(se,{variant:"outline",onClick:a[25]||(a[25]=e=>ee.showResetModal=!1)},{default:(0,s.k6)((()=>a[73]||(a[73]=[(0,s.eW)(" å–æ¶ˆ ")]))),_:1}),(0,s.bF)(se,{variant:"danger",onClick:ee.confirmReset},{default:(0,s.k6)((()=>a[74]||(a[74]=[(0,s.eW)(" ç¡®è®¤é‡ç½® ")]))),_:1},8,["onClick"])])])])),_:1})):(0,s.Q3)("",!0),ee.showSuccessNotification?((0,s.uX)(),(0,s.CE)("div",Z,a[77]||(a[77]=[(0,s.Lk)("div",{class:"notification-content"},[(0,s.Lk)("span",{class:"notification-icon"},"âœ…"),(0,s.Lk)("span",{class:"notification-text"},"è®¾ç½®ä¿å­˜æˆåŠŸï¼")],-1)]))):(0,s.Q3)("",!0)])}t(8111),t(7588);var ae=t(144),te=t(1218),se=t(4693),ie=t(4121),oe={name:"SystemSettings",components:{BaseButton:te.A,BaseCard:se.A,BaseModal:ie.A},setup(){const e=(0,ae.KR)(!1),a=(0,ae.KR)(!1),t=(0,ae.KR)(!1),i=(0,ae.KR)(null),o=(0,ae.KR)(!1),l=()=>{const e=localStorage.getItem("theme");e&&(n.basic.defaultTheme=e,u(e))},n=(0,ae.Kh)({basic:{siteName:"æ™ºèƒ½æ¢è£…ç³»ç»Ÿ",logoUrl:"",defaultTheme:"light"},security:{twoFactorAuth:!1,sessionTimeout:60,passwordPolicy:"medium",loginLock:{enabled:!0,maxAttempts:5,lockDuration:30}},ai:{apiProvider:"openai",apiKey:"",defaultModel:"gpt-3.5-turbo",enabledFeatures:{design:!0,propaganda:!0,modelConversion:!0,animation:!0,video:!0}},notification:{emailService:"smtp",smtp:{server:"",port:587,username:"",password:""},types:{login:!0,task:!0,system:!0}}}),r=JSON.parse(JSON.stringify(n)),d=()=>{i.value&&i.value.click()},c=e=>{const a=e.target.files[0];if(!a)return;if(!a.type.startsWith("image/"))return void alert("è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶");const t=new FileReader;t.onload=e=>{n.basic.logoUrl=e.target.result},t.readAsDataURL(a)},u=e=>{document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)};(0,s.wB)((()=>n.basic.defaultTheme),(e=>{u(e)}));const p=e=>{n.basic.defaultTheme=e,u(e)},k=async()=>{a.value=!0;try{await new Promise((e=>setTimeout(e,1e3))),u(n.basic.defaultTheme),o.value=!0,setTimeout((()=>{o.value=!1}),3e3)}catch(e){console.error("ä¿å­˜è®¾ç½®å¤±è´¥",e),alert("ä¿å­˜è®¾ç½®å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{a.value=!1}},m=()=>{t.value=!0},v=()=>{Object.keys(r).forEach((e=>{n[e]=JSON.parse(JSON.stringify(r[e]))})),t.value=!1,o.value=!0,setTimeout((()=>{o.value=!1}),3e3)};return(0,s.sV)((()=>{l()})),{settings:n,showApiKey:e,saving:a,showResetModal:t,showSuccessNotification:o,logoInput:i,triggerLogoUpload:d,handleLogoUpload:c,selectTheme:p,saveSettings:k,resetSettings:m,confirmReset:v}}},le=t(1241);const ne=(0,le.A)(oe,[["render",ee],["__scopeId","data-v-fce024fa"]]);var re=ne},8659:function(e,a,t){t.d(a,{A:function(){return f}});var s=t(6768),i=t(4232),o=t(5130);const l={class:"app-container"},n={class:"sidebar"},r={class:"menu"},d={class:"main-content"},c={class:"page-container"},u={ref:"rippleContainer",class:"ripple-container"};function p(e,a,t,p,k,m){const v=(0,s.g2)("router-link"),g=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",l,[a[14]||(a[14]=(0,s.Lk)("div",{class:"animated-background"},null,-1)),(0,s.Lk)("div",n,[a[12]||(a[12]=(0,s.Lk)("div",{class:"logo"},[(0,s.Lk)("h2",null,"æ™ºèƒ½æ¢è£…"),(0,s.Lk)("div",{class:"logo-underline"})],-1)),(0,s.Lk)("div",r,[(0,s.bF)(v,{to:"/",class:"menu-item"},{default:(0,s.k6)((({isActive:e})=>[(0,s.Lk)("div",{class:(0,i.C4)(["menu-item-inner",{active:e}])},a[1]||(a[1]=[(0,s.Lk)("span",{class:"menu-icon"},"ğŸ ",-1),(0,s.Lk)("span",null,"é¦–é¡µ",-1)]),2)])),_:1}),(0,s.Lk)("div",{class:(0,i.C4)(["menu-item has-submenu",{expanded:k.isModelTrainingExpanded}])},[(0,s.Lk)("div",{class:"menu-item-content",onClick:a[0]||(a[0]=(...e)=>m.toggleModelTraining&&m.toggleModelTraining(...e))},[a[2]||(a[2]=(0,s.Lk)("span",{class:"menu-icon"},"ğŸ§ ",-1)),a[3]||(a[3]=(0,s.Lk)("span",null,"æ¨¡å‹è®­ç»ƒ",-1)),(0,s.Lk)("span",{class:(0,i.C4)(["submenu-arrow",{expanded:k.isModelTrainingExpanded}])},"â–¼",2)]),(0,s.bo)((0,s.Lk)("div",{class:(0,i.C4)(["submenu",{"submenu-enter-active":k.isModelTrainingExpanded}])},[(0,s.bF)(v,{to:"/model-training/material",class:"submenu-item"},{default:(0,s.k6)((({isActive:e})=>[(0,s.Lk)("div",{class:(0,i.C4)({active:e})},a[4]||(a[4]=[(0,s.Lk)("span",{class:"submenu-icon"},"ğŸ“",-1),(0,s.Lk)("span",null,"ç´ æåº“",-1)]),2)])),_:1}),(0,s.bF)(v,{to:"/model-training/settings",class:"submenu-item"},{default:(0,s.k6)((({isActive:e})=>[(0,s.Lk)("div",{class:(0,i.C4)({active:e})},a[5]||(a[5]=[(0,s.Lk)("span",{class:"submenu-icon"},"âš™ï¸",-1),(0,s.Lk)("span",null,"æ¨¡å‹è®¾ç½®",-1)]),2)])),_:1})],2),[[o.aG,k.isModelTrainingExpanded]])],2),(0,s.bF)(v,{to:"/smart-design",class:"menu-item"},{default:(0,s.k6)((({isActive:e})=>[(0,s.Lk)("div",{class:(0,i.C4)(["menu-item-inner",{active:e}])},a[6]||(a[6]=[(0,s.Lk)("span",{class:"menu-icon"},"âœ¨",-1),(0,s.Lk)("span",null,"æ™ºèƒ½è®¾è®¡",-1)]),2)])),_:1}),(0,s.bF)(v,{to:"/propaganda",class:"menu-item"},{default:(0,s.k6)((({isActive:e})=>[(0,s.Lk)("div",{class:(0,i.C4)(["menu-item-inner",{active:e}])},a[7]||(a[7]=[(0,s.Lk)("span",{class:"menu-icon"},"ğŸ’¬",-1),(0,s.Lk)("span",null,"å®£ä¼ è¯æœ¯ç”Ÿæˆ",-1)]),2)])),_:1}),(0,s.bF)(v,{to:"/model-conversion",class:"menu-item"},{default:(0,s.k6)((({isActive:e})=>[(0,s.Lk)("div",{class:(0,i.C4)(["menu-item-inner",{active:e}])},a[8]||(a[8]=[(0,s.Lk)("span",{class:"menu-icon"},"ğŸ‘—",-1),(0,s.Lk)("span",null,"æ¨¡ç‰¹æ¢è£…",-1)]),2)])),_:1}),(0,s.bF)(v,{to:"/animation",class:"menu-item"},{default:(0,s.k6)((({isActive:e})=>[(0,s.Lk)("div",{class:(0,i.C4)(["menu-item-inner",{active:e}])},a[9]||(a[9]=[(0,s.Lk)("span",{class:"menu-icon"},"ğŸï¸",-1),(0,s.Lk)("span",null,"åŠ¨å›¾ç”Ÿæˆ",-1)]),2)])),_:1}),(0,s.bF)(v,{to:"/video",class:"menu-item"},{default:(0,s.k6)((({isActive:e})=>[(0,s.Lk)("div",{class:(0,i.C4)(["menu-item-inner",{active:e}])},a[10]||(a[10]=[(0,s.Lk)("span",{class:"menu-icon"},"ğŸ¬",-1),(0,s.Lk)("span",null,"è§†é¢‘ç”Ÿæˆ",-1)]),2)])),_:1}),(0,s.bF)(v,{to:"/system",class:"menu-item"},{default:(0,s.k6)((({isActive:e})=>[(0,s.Lk)("div",{class:(0,i.C4)(["menu-item-inner",{active:e}])},a[11]||(a[11]=[(0,s.Lk)("span",{class:"menu-icon"},"âš™ï¸",-1),(0,s.Lk)("span",null,"ç³»ç»Ÿç®¡ç†",-1)]),2)])),_:1})])]),(0,s.Lk)("div",d,[a[13]||(a[13]=(0,s.Fv)('<div class="user-profile-bar"><div class="user-info-container"><div class="user-profile"><div class="user-avatar"><img src="https://api.dicebear.com/7.x/avataaars/svg?seed=æ™ºèƒ½æ¢è£…ç”¨æˆ·" alt="ç”¨æˆ·å¤´åƒ"></div><div class="user-info"><span class="user-name">æ™ºèƒ½æ¢è£…ç”¨æˆ·</span><span class="user-role">é«˜çº§è®¾è®¡å¸ˆ</span></div></div></div><div class="user-actions"><button class="action-btn notification"><span class="icon">ğŸ””</span><span class="badge">3</span></button><button class="action-btn messages"><span class="icon">âœ‰ï¸</span></button><button class="action-btn settings"><span class="icon">âš™ï¸</span></button></div></div>',1)),(0,s.Lk)("div",c,[(0,s.bF)(o.eB,{name:"fade-slide",mode:"out-in"},{default:(0,s.k6)((()=>[(0,s.bF)(g)])),_:1})])])]),(0,s.Lk)("div",u,null,512)],64)}var k=t(4249),m=t(2615),v={name:"App",data(){return{isModelTrainingExpanded:!1,forceLoadTimeout:null}},computed:{...(0,k.aH)({userData:e=>e.userData,notifications:e=>e.notifications})},watch:{$route(e){e.path.includes("model-training")?this.isModelTrainingExpanded=!0:this.isModelTrainingExpanded=!1}},mounted(){this.$route.path.includes("model-training")&&(this.isModelTrainingExpanded=!0),document.body.classList.add("page-loaded"),setTimeout((()=>{const e=document.getElementById("initial-loader");e&&e.parentNode&&(e.style.opacity="0",setTimeout((()=>{e.parentNode&&e.parentNode.removeChild(e)}),100)),document.getElementById("app")&&0===document.getElementById("app").children.length&&(console.error("Application failed to render properly, forcing refresh"),window.location.reload())}),1e3),this.$nextTick((()=>{document.addEventListener("click",this.throttledRipple()),(0,m.Qw)(),this.fetchUserData()}))},methods:{...(0,k.i0)(["fetchUserData","fetchNotifications"]),toggleModelTraining(){this.isModelTrainingExpanded=!this.isModelTrainingExpanded},throttledRipple(){return(0,m.nF)((e=>{if(!this.$refs.rippleContainer)return;const a=document.createElement("span");a.classList.add("ripple-effect");const t=this.$refs.rippleContainer.getBoundingClientRect(),s=Math.max(t.width,t.height);a.style.width=a.style.height=`${s}px`,a.style.left=e.clientX-t.left-s/2+"px",a.style.top=e.clientY-t.top-s/2+"px",this.$refs.rippleContainer.appendChild(a),setTimeout((()=>{a.parentNode&&a.parentNode.removeChild(a)}),600)}),100)}},beforeUnmount(){document.removeEventListener("click",this.throttledRipple()),this.forceLoadTimeout&&clearTimeout(this.forceLoadTimeout)}},g=t(1241);const L=(0,g.A)(v,[["render",p]]);var f=L},9521:function(e,a,t){t.d(a,{A:function(){return q}});var s=t(6768),i=t(5130),o=t(4232);const l={class:"data-backup"},n={class:"section-header"},r={class:"header-actions"},d={class:"backup-container"},c={class:"backup-options"},u={class:"backup-form"},p={class:"form-group"},k={class:"checkbox-group"},m={class:"checkbox-item"},v={class:"checkbox-item"},g={class:"checkbox-item"},L={class:"checkbox-item"},f={class:"form-group"},b={class:"form-group"},h={class:"form-group"},y={class:"toggle-switch"},w={class:"backup-history"},C={key:0,class:"loading-state"},_={key:1,class:"empty-state"},D={key:2,class:"backup-list"},x={class:"backup-info"},E={class:"backup-name"},A={class:"backup-meta"},F={class:"backup-date"},P={class:"backup-size"},U={key:0,class:"backup-desc"},M={class:"backup-content"},R={class:"backup-actions"},B=["onClick"],S=["onClick"],K=["onClick"],T={class:"confirm-modal"},X={class:"checkbox-item warning-check"},W={class:"modal-actions"},V={class:"confirm-modal"},I={class:"modal-actions"};function $(e,a,t,$,z,O){const Q=(0,s.g2)("BaseButton"),N=(0,s.g2)("BaseCard"),J=(0,s.g2)("BaseModal");return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("div",n,[a[13]||(a[13]=(0,s.Lk)("h2",null,"æ•°æ®å¤‡ä»½",-1)),(0,s.Lk)("div",r,[(0,s.bF)(Q,{variant:"primary",size:"small",onClick:$.createBackup,loading:$.creating},{default:(0,s.k6)((()=>a[12]||(a[12]=[(0,s.eW)(" åˆ›å»ºå¤‡ä»½ ")]))),_:1},8,["onClick","loading"])])]),(0,s.Lk)("div",d,[(0,s.Lk)("div",c,[(0,s.bF)(N,{class:"options-card"},{header:(0,s.k6)((()=>a[14]||(a[14]=[(0,s.Lk)("div",{class:"card-header-title"},[(0,s.Lk)("span",{class:"header-icon"},"ğŸ’¾"),(0,s.Lk)("h3",null,"å¤‡ä»½é€‰é¡¹")],-1)]))),default:(0,s.k6)((()=>[(0,s.Lk)("div",u,[(0,s.Lk)("div",p,[a[19]||(a[19]=(0,s.Lk)("label",null,"å¤‡ä»½å†…å®¹",-1)),(0,s.Lk)("div",k,[(0,s.Lk)("div",m,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"backupDb","onUpdate:modelValue":a[0]||(a[0]=e=>$.backupOptions.database=e)},null,512),[[i.lH,$.backupOptions.database]]),a[15]||(a[15]=(0,s.Lk)("label",{for:"backupDb"},"æ•°æ®åº“",-1))]),(0,s.Lk)("div",v,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"backupFiles","onUpdate:modelValue":a[1]||(a[1]=e=>$.backupOptions.files=e)},null,512),[[i.lH,$.backupOptions.files]]),a[16]||(a[16]=(0,s.Lk)("label",{for:"backupFiles"},"ä¸Šä¼ æ–‡ä»¶",-1))]),(0,s.Lk)("div",g,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"backupSettings","onUpdate:modelValue":a[2]||(a[2]=e=>$.backupOptions.settings=e)},null,512),[[i.lH,$.backupOptions.settings]]),a[17]||(a[17]=(0,s.Lk)("label",{for:"backupSettings"},"ç³»ç»Ÿè®¾ç½®",-1))]),(0,s.Lk)("div",L,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"backupLogs","onUpdate:modelValue":a[3]||(a[3]=e=>$.backupOptions.logs=e)},null,512),[[i.lH,$.backupOptions.logs]]),a[18]||(a[18]=(0,s.Lk)("label",{for:"backupLogs"},"ç³»ç»Ÿæ—¥å¿—",-1))])])]),(0,s.Lk)("div",f,[a[20]||(a[20]=(0,s.Lk)("label",{for:"backupName"},"å¤‡ä»½åç§°",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"backupName","onUpdate:modelValue":a[4]||(a[4]=e=>$.backupOptions.name=e),placeholder:"å¤‡ä»½åç§°ï¼ˆå¯é€‰ï¼‰"},null,512),[[i.Jo,$.backupOptions.name]])]),(0,s.Lk)("div",b,[a[21]||(a[21]=(0,s.Lk)("label",{for:"backupDesc"},"å¤‡ä»½æè¿°",-1)),(0,s.bo)((0,s.Lk)("textarea",{id:"backupDesc","onUpdate:modelValue":a[5]||(a[5]=e=>$.backupOptions.description=e),placeholder:"å¤‡ä»½æè¿°ï¼ˆå¯é€‰ï¼‰",rows:"3"},null,512),[[i.Jo,$.backupOptions.description]])]),(0,s.Lk)("div",h,[(0,s.Lk)("div",y,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"compressBackup","onUpdate:modelValue":a[6]||(a[6]=e=>$.backupOptions.compress=e)},null,512),[[i.lH,$.backupOptions.compress]]),a[22]||(a[22]=(0,s.Lk)("label",{for:"compressBackup",class:"toggle-label"},null,-1)),a[23]||(a[23]=(0,s.Lk)("span",{class:"toggle-text"},"å‹ç¼©å¤‡ä»½æ–‡ä»¶",-1))])])])])),_:1})]),(0,s.Lk)("div",w,[(0,s.bF)(N,null,{header:(0,s.k6)((()=>a[24]||(a[24]=[(0,s.Lk)("div",{class:"card-header-title"},[(0,s.Lk)("span",{class:"header-icon"},"ğŸ“‹"),(0,s.Lk)("h3",null,"å¤‡ä»½å†å²")],-1)]))),default:(0,s.k6)((()=>[$.loading?((0,s.uX)(),(0,s.CE)("div",C,a[25]||(a[25]=[(0,s.Lk)("div",{class:"loading-spinner"},null,-1),(0,s.Lk)("p",null,"åŠ è½½å¤‡ä»½å†å²ä¸­...",-1)]))):0===$.backups.length?((0,s.uX)(),(0,s.CE)("div",_,a[26]||(a[26]=[(0,s.Lk)("div",{class:"empty-icon"},"ğŸ’¾",-1),(0,s.Lk)("p",null,"æš‚æ— å¤‡ä»½è®°å½•",-1),(0,s.Lk)("p",{class:"empty-hint"},'ç‚¹å‡»"åˆ›å»ºå¤‡ä»½"æŒ‰é’®åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªå¤‡ä»½',-1)]))):((0,s.uX)(),(0,s.CE)("div",D,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)($.backups,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"backup-item"},[(0,s.Lk)("div",x,[(0,s.Lk)("div",E,(0,o.v_)(e.name||`å¤‡ä»½-${$.formatDate(e.createdAt,"short")}`),1),(0,s.Lk)("div",A,[(0,s.Lk)("span",F,(0,o.v_)($.formatDate(e.createdAt)),1),(0,s.Lk)("span",P,(0,o.v_)($.formatSize(e.size)),1)]),e.description?((0,s.uX)(),(0,s.CE)("div",U,(0,o.v_)(e.description),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",M,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.content,((e,a)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("span",{key:a,class:"content-tag"},(0,o.v_)($.getContentLabel(a)),1)),[[i.aG,e]]))),128))])]),(0,s.Lk)("div",R,[(0,s.Lk)("button",{class:"action-btn restore",title:"æ¢å¤å¤‡ä»½",onClick:a=>$.confirmRestore(e)}," ğŸ”„ ",8,B),(0,s.Lk)("button",{class:"action-btn download",title:"ä¸‹è½½å¤‡ä»½",onClick:a=>$.downloadBackup(e)}," â¬‡ï¸ ",8,S),(0,s.Lk)("button",{class:"action-btn delete",title:"åˆ é™¤å¤‡ä»½",onClick:a=>$.confirmDelete(e)}," ğŸ—‘ï¸ ",8,K)])])))),128))]))])),_:1})])]),$.showRestoreModal?((0,s.uX)(),(0,s.Wv)(J,{key:0,title:"æ¢å¤å¤‡ä»½",onClose:a[9]||(a[9]=e=>$.showRestoreModal=!1)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",T,[a[30]||(a[30]=(0,s.Lk)("p",null,"æ‚¨ç¡®å®šè¦æ¢å¤æ­¤å¤‡ä»½å—ï¼Ÿ",-1)),a[31]||(a[31]=(0,s.Lk)("p",{class:"warning"},"æ¢å¤å¤‡ä»½å°†è¦†ç›–å½“å‰æ•°æ®ï¼Œæ­¤æ“ä½œä¸å¯é€†ï¼",-1)),(0,s.Lk)("div",X,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"confirmRestore","onUpdate:modelValue":a[7]||(a[7]=e=>$.restoreConfirmed=e)},null,512),[[i.lH,$.restoreConfirmed]]),a[27]||(a[27]=(0,s.Lk)("label",{for:"confirmRestore"},"æˆ‘å·²äº†è§£æ¢å¤å¤‡ä»½çš„é£é™©ï¼Œå¹¶å·²åšå¥½å‡†å¤‡",-1))]),(0,s.Lk)("div",W,[(0,s.bF)(Q,{variant:"outline",onClick:a[8]||(a[8]=e=>$.showRestoreModal=!1)},{default:(0,s.k6)((()=>a[28]||(a[28]=[(0,s.eW)(" å–æ¶ˆ ")]))),_:1}),(0,s.bF)(Q,{variant:"danger",disabled:!$.restoreConfirmed,loading:$.restoring,onClick:$.restoreBackup},{default:(0,s.k6)((()=>a[29]||(a[29]=[(0,s.eW)(" æ¢å¤å¤‡ä»½ ")]))),_:1},8,["disabled","loading","onClick"])])])])),_:1})):(0,s.Q3)("",!0),$.showDeleteModal?((0,s.uX)(),(0,s.Wv)(J,{key:1,title:"åˆ é™¤å¤‡ä»½",onClose:a[11]||(a[11]=e=>$.showDeleteModal=!1)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",V,[a[34]||(a[34]=(0,s.Lk)("p",null,"æ‚¨ç¡®å®šè¦åˆ é™¤æ­¤å¤‡ä»½å—ï¼Ÿ",-1)),a[35]||(a[35]=(0,s.Lk)("p",{class:"warning"},"åˆ é™¤åå°†æ— æ³•æ¢å¤ï¼",-1)),(0,s.Lk)("div",I,[(0,s.bF)(Q,{variant:"outline",onClick:a[10]||(a[10]=e=>$.showDeleteModal=!1)},{default:(0,s.k6)((()=>a[32]||(a[32]=[(0,s.eW)(" å–æ¶ˆ ")]))),_:1}),(0,s.bF)(Q,{variant:"danger",loading:$.deleting,onClick:$.deleteBackup},{default:(0,s.k6)((()=>a[33]||(a[33]=[(0,s.eW)(" åˆ é™¤å¤‡ä»½ ")]))),_:1},8,["loading","onClick"])])])])),_:1})):(0,s.Q3)("",!0)])}t(8111),t(2489);var z=t(144),O=t(1218),Q=t(4693),N=t(4121),J={name:"DataBackup",components:{BaseButton:O.A,BaseCard:Q.A,BaseModal:N.A},setup(){const e=(0,z.KR)([]),a=(0,z.KR)(!0),t=(0,z.KR)(!1),i=(0,z.KR)(!1),o=(0,z.KR)(!1),l=(0,z.KR)(!1),n=(0,z.KR)(!1),r=(0,z.KR)(!1),d=(0,z.KR)(null),c=(0,z.Kh)({database:!0,files:!0,settings:!0,logs:!1,name:"",description:"",compress:!0}),u=async()=>{a.value=!0;try{await new Promise((e=>setTimeout(e,1e3))),e.value=[{id:"backup-1",name:"æ¯å‘¨å¤‡ä»½",description:"è‡ªåŠ¨åˆ›å»ºçš„æ¯å‘¨å¤‡ä»½",createdAt:new Date(2023,9,25,3,0),size:15728640,content:{database:!0,files:!0,settings:!0,logs:!1}},{id:"backup-2",name:"æ›´æ–°å‰å¤‡ä»½",description:"ç³»ç»Ÿæ›´æ–°å‰æ‰‹åŠ¨åˆ›å»ºçš„å¤‡ä»½",createdAt:new Date(2023,9,20,14,30),size:13107200,content:{database:!0,files:!0,settings:!0,logs:!1}},{id:"backup-3",name:"",description:"",createdAt:new Date(2023,9,15,9,0),size:10695475.2,content:{database:!0,files:!1,settings:!0,logs:!1}}]}catch(t){console.error("è·å–å¤‡ä»½åˆ—è¡¨å¤±è´¥",t)}finally{a.value=!1}},p=async()=>{if(c.database||c.files||c.settings||c.logs){t.value=!0;try{await new Promise((e=>setTimeout(e,2e3)));const a={id:`backup-${Date.now()}`,name:c.name,description:c.description,createdAt:new Date,size:10*Math.random()*1024*1024+5242880,content:{database:c.database,files:c.files,settings:c.settings,logs:c.logs}};e.value.unshift(a),c.name="",c.description="",alert("å¤‡ä»½åˆ›å»ºæˆåŠŸ")}catch(a){console.error("åˆ›å»ºå¤‡ä»½å¤±è´¥",a),alert("åˆ›å»ºå¤‡ä»½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{t.value=!1}}else alert("è¯·è‡³å°‘é€‰æ‹©ä¸€é¡¹å¤‡ä»½å†…å®¹")},k=e=>{d.value=e,l.value=!1,n.value=!0},m=async()=>{if(l.value&&d.value){i.value=!0;try{await new Promise((e=>setTimeout(e,3e3))),alert("å¤‡ä»½æ¢å¤æˆåŠŸï¼Œç³»ç»Ÿå°†åœ¨3ç§’ååˆ·æ–°"),setTimeout((()=>{n.value=!1}),3e3)}catch(e){console.error("æ¢å¤å¤‡ä»½å¤±è´¥",e),alert("æ¢å¤å¤‡ä»½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{i.value=!1}}},v=e=>{alert(`æ¨¡æ‹Ÿä¸‹è½½å¤‡ä»½ï¼š${e.name||"æœªå‘½åå¤‡ä»½"}`)},g=e=>{d.value=e,r.value=!0},L=async()=>{if(d.value){o.value=!0;try{await new Promise((e=>setTimeout(e,1e3))),e.value=e.value.filter((e=>e.id!==d.value.id)),r.value=!1,alert("å¤‡ä»½å·²åˆ é™¤")}catch(a){console.error("åˆ é™¤å¤‡ä»½å¤±è´¥",a),alert("åˆ é™¤å¤‡ä»½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{o.value=!1}}},f=(e,a="full")=>"short"===a?new Date(e).toLocaleDateString("zh-CN"):new Date(e).toLocaleString("zh-CN"),b=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":e<1073741824?(e/1048576).toFixed(1)+" MB":(e/1073741824).toFixed(1)+" GB",h=e=>{const a={database:"æ•°æ®åº“",files:"æ–‡ä»¶",settings:"è®¾ç½®",logs:"æ—¥å¿—"};return a[e]||e};return(0,s.sV)((()=>{u()})),{backups:e,loading:a,creating:t,restoring:i,deleting:o,backupOptions:c,showRestoreModal:n,showDeleteModal:r,restoreConfirmed:l,selectedBackup:d,fetchBackups:u,createBackup:p,confirmRestore:k,restoreBackup:m,downloadBackup:v,confirmDelete:g,deleteBackup:L,formatDate:f,formatSize:b,getContentLabel:h}}},G=t(1241);const H=(0,G.A)(J,[["render",$],["__scopeId","data-v-f0380330"]]);var q=H}}]);